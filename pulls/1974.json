{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bips/pulls/1974",
    "id": 2843895712,
    "node_id": "PR_kwDOAN28mc6pgmeg",
    "html_url": "https://github.com/bitcoin/bips/pull/1974",
    "diff_url": "https://github.com/bitcoin/bips/pull/1974.diff",
    "patch_url": "https://github.com/bitcoin/bips/pull/1974.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/1974",
    "commits_url": "https://api.github.com/repos/bitcoin/bips/pulls/1974/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bips/pulls/1974/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bips/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bips/issues/1974/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bips/statuses/aa790efee91f56b123d679f6fdef4c955903b2b4",
    "number": 1974,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Add OP_TEMPLATEHASH and TH+CSFS+IK bundle BIP",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Opening this here for wider discussion and feedback.\r\n\r\nedit: Probably need to add implementation section: https://github.com/instagibbs/bitcoin/tree/2025-07-op_templatehash\r\n",
    "labels": [
      {
        "id": 275845989,
        "node_id": "MDU6TGFiZWwyNzU4NDU5ODk=",
        "url": "https://api.github.com/repos/bitcoin/bips/labels/New%20BIP",
        "name": "New BIP",
        "color": "5319e7",
        "default": false
      }
    ],
    "created_at": "2025-09-19T13:41:19Z",
    "updated_at": "2025-09-23T00:15:24Z",
    "mergeable": true,
    "mergeable_state": "clean",
    "merged": false,
    "merge_commit_sha": "d2090ea574d671a2418a756db6ab7867e9c63d98",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "instagibbs:bip_op_templatehash",
      "ref": "bip_op_templatehash",
      "sha": "aa790efee91f56b123d679f6fdef4c955903b2b4",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 17830834,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNzgzMDgzNA==",
        "name": "bips",
        "full_name": "instagibbs/bips",
        "owner": {
          "login": "instagibbs",
          "id": 5767891,
          "node_id": "MDQ6VXNlcjU3Njc4OTE=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/instagibbs",
          "html_url": "https://github.com/instagibbs",
          "followers_url": "https://api.github.com/users/instagibbs/followers",
          "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
          "organizations_url": "https://api.github.com/users/instagibbs/orgs",
          "repos_url": "https://api.github.com/users/instagibbs/repos",
          "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/instagibbs/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/instagibbs/bips",
        "description": "Bitcoin Improvement Proposals",
        "fork": true,
        "url": "https://api.github.com/repos/instagibbs/bips",
        "archive_url": "https://api.github.com/repos/instagibbs/bips/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/instagibbs/bips/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/instagibbs/bips/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/instagibbs/bips/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/instagibbs/bips/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/instagibbs/bips/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/instagibbs/bips/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/instagibbs/bips/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/instagibbs/bips/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/instagibbs/bips/contributors",
        "deployments_url": "https://api.github.com/repos/instagibbs/bips/deployments",
        "downloads_url": "https://api.github.com/repos/instagibbs/bips/downloads",
        "events_url": "https://api.github.com/repos/instagibbs/bips/events",
        "forks_url": "https://api.github.com/repos/instagibbs/bips/forks",
        "git_commits_url": "https://api.github.com/repos/instagibbs/bips/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/instagibbs/bips/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/instagibbs/bips/git/tags%7B/sha%7D",
        "git_url": "git://github.com/instagibbs/bips.git",
        "issue_comment_url": "https://api.github.com/repos/instagibbs/bips/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/instagibbs/bips/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/instagibbs/bips/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/instagibbs/bips/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/instagibbs/bips/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/instagibbs/bips/languages",
        "merges_url": "https://api.github.com/repos/instagibbs/bips/merges",
        "milestones_url": "https://api.github.com/repos/instagibbs/bips/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/instagibbs/bips/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/instagibbs/bips/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/instagibbs/bips/releases%7B/id%7D",
        "ssh_url": "git@github.com:instagibbs/bips.git",
        "stargazers_url": "https://api.github.com/repos/instagibbs/bips/stargazers",
        "statuses_url": "https://api.github.com/repos/instagibbs/bips/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/instagibbs/bips/subscribers",
        "subscription_url": "https://api.github.com/repos/instagibbs/bips/subscription",
        "tags_url": "https://api.github.com/repos/instagibbs/bips/tags",
        "teams_url": "https://api.github.com/repos/instagibbs/bips/teams",
        "trees_url": "https://api.github.com/repos/instagibbs/bips/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/instagibbs/bips.git",
        "hooks_url": "https://api.github.com/repos/instagibbs/bips/hooks",
        "svn_url": "https://github.com/instagibbs/bips",
        "homepage": "bitcoin.org",
        "language": "Wikitext",
        "forks_count": 1,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 16785,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-09-19T13:34:04Z",
        "created_at": "2014-03-17T14:32:12Z",
        "updated_at": "2025-09-19T13:34:16Z",
        "allow_forking": true
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "6730ee8a1e767ccc5594938f8a73aca8a639a1cf",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 14531737,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDUzMTczNw==",
        "name": "bips",
        "full_name": "bitcoin/bips",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bips",
        "description": "Bitcoin Improvement Proposals",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bips",
        "archive_url": "https://api.github.com/repos/bitcoin/bips/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bips/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bips/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bips/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bips/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bips/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bips/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bips/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bips/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bips/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bips/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bips/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bips/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bips/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bips/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bips/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bips/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bips.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bips/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bips/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bips/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bips/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bips/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bips/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bips/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bips/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bips/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bips/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bips/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bips.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bips/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bips/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bips/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bips/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bips/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bips/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bips/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bips.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bips/hooks",
        "svn_url": "https://github.com/bitcoin/bips",
        "homepage": "",
        "language": "Wikitext",
        "forks_count": 5740,
        "stargazers_count": 10207,
        "watchers_count": 10207,
        "size": 16632,
        "default_branch": "master",
        "open_issues_count": 50,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": false,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-09-19T23:31:04Z",
        "created_at": "2013-11-19T17:18:41Z",
        "updated_at": "2025-09-22T15:38:51Z",
        "allow_forking": true
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bips/pulls/1974"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 882,
    "deletions": 0,
    "changed_files": 5,
    "commits": 1,
    "review_comments": 0,
    "comments": 2
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAN28mdoAKGFhNzkwZWZlZTkxZjU2YjEyM2Q2NzlmNmZkZWY0Yzk1NTkwM2IyYjQ",
      "url": "https://api.github.com/repos/bitcoin/bips/git/commits/aa790efee91f56b123d679f6fdef4c955903b2b4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bips/commit/aa790efee91f56b123d679f6fdef4c955903b2b4",
      "tree": {
        "sha": "cc1c71f28d4aa9da02aa44cfb11af8e65327c16b",
        "url": "https://api.github.com/repos/bitcoin/bips/git/trees/cc1c71f28d4aa9da02aa44cfb11af8e65327c16b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bips/git/commits/6730ee8a1e767ccc5594938f8a73aca8a639a1cf",
          "sha": "6730ee8a1e767ccc5594938f8a73aca8a639a1cf",
          "html_url": "https://github.com/bitcoin/bips/commit/6730ee8a1e767ccc5594938f8a73aca8a639a1cf"
        }
      ],
      "message": "Add OP_TEMPLATEHASH and TH+CSFS+IK bundle BIP",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2025-09-19T13:32:54Z"
      },
      "author": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-15T14:53:22Z"
      },
      "sha": "aa790efee91f56b123d679f6fdef4c955903b2b4"
    },
    {
      "event": "labeled",
      "id": 19800272281,
      "node_id": "LE_lADOAN28mc7MtTV-zwAAAAScMC2Z",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/19800272281",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-19T13:59:17Z",
      "label": {
        "name": "New BIP",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 3312632171,
      "node_id": "IC_kwDOAN28mc7FcsFr",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/3312632171",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-19T15:23:31Z",
      "updated_at": "2025-09-19T15:23:31Z",
      "author_association": "MEMBER",
      "body": "Some previous related discussions:\r\n- [\"What's a good stopping point? Making the case for the capabilities enabled by CTV+CSFS\"](https://gnusha.org/pi/bitcoindev/F5vsDVNGXP_hmCvp4kFnptFLBCXOoRxWk9d05kSInq_kXj0ePqVAJGADkBFJxYIGkjk8Pw1gzBonTivH6WUUb4f6mwNCmJIwdXBMrjjQ0lI=@protonmail.com/) - Bitcoin dev mailing list thread discussing the capabilities offered in this proposal.\r\n- [\"A Taproot-native (re-)bindable transaction bundle proposal\"](https://gnusha.org/pi/bitcoindev/26b96fb1-d916-474a-bd23-920becc3412cn@googlegroups.com/) - Bitcoin dev mailing list thread announcing this proposal.\r\n- [Reference implementation](https://github.com/instagibbs/bitcoin/pull/3) of this proposal.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bips/pull/1974#issuecomment-3312632171",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/1974"
    },
    {
      "event": "commented",
      "id": 3321878856,
      "node_id": "IC_kwDOAN28mc7F_9lI",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/3321878856",
      "actor": {
        "login": "Ademan",
        "id": 18740,
        "node_id": "MDQ6VXNlcjE4NzQw",
        "avatar_url": "https://avatars.githubusercontent.com/u/18740?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Ademan",
        "html_url": "https://github.com/Ademan",
        "followers_url": "https://api.github.com/users/Ademan/followers",
        "following_url": "https://api.github.com/users/Ademan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Ademan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Ademan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Ademan/subscriptions",
        "organizations_url": "https://api.github.com/users/Ademan/orgs",
        "repos_url": "https://api.github.com/users/Ademan/repos",
        "events_url": "https://api.github.com/users/Ademan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Ademan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-22T23:29:29Z",
      "updated_at": "2025-09-23T00:15:24Z",
      "author_association": "NONE",
      "body": "I'm afraid I'm going to write a lot and say very little, but I have a few thoughts **maybe** worth sharing.\r\n**TL;DR I like this proposal. As-is I prefer it slightly over CTV, but I think committing to the annex may be undesirable, and it's worth further discussion (as much as I'd like to avoid excessive bikeshedding).**\r\n\r\nThe improvements on CTV are obvious, pushing the hash onto the stack is better, leveraging only cached intermediate hashes is better.\r\n\r\n# scriptSig Commitment\r\n\r\nDropping the scriptSig commitment seems debatable, but I accept the given rationale for omitting it. Furthermore, CTV's scriptSig commitment introduces a new variable length chunk of data to hash. \r\n\r\n# The Annex Commitment\r\n\r\nThe annex commitment is of course the most controversial addition. On the one hand, it is incredibly useful to eltoo style protocols, and `TEMPLATEHASH` commits to similar items as the taproot sighash, which includes the annex. On the other hand, the annex is the only witness item committed to, and there are plausible conflicts with future annex usage. I have to plead ignorance on the future annex usage issues, I can only say it seems *plausible*. Furthermore, it could be desirable to commit to only part of the annex, which is not permitted by `TEMPLATEHASH`, and developing a structured annex format adds a significant development dependency to TEMPLATEHASH.\r\n\r\nI can imagine, for example, that CISA might leverage the annex to set the order of public keys in an aggregate key. In this scenario, committing to the entire annex ahead of time would prevent using CISA, though once again I confess I don't know what such a scheme would actually look like.\r\n\r\nMy instinct here is to reduce the scope of `TEMPLATEHASH`. When in doubt, leave it out (how can it be wrong if it rhymes?) I could envision a future `OP_TEMPLATEHASH_ANNEX` if annex commitments proved to be that desirable, but at present it seems to me like the practical motivation for committing to the annex is entirely around eltoo, and there's a non-zero chance it could conflict with other annex usages.\r\n\r\nOn the other hand, introducing a future `OP_TEMPLATEHASH_NO_ANNEX` would be similarly simple if the annex commitment proved to be a problem, and `OP_TEMPLATEHASH` (with annex) would be immediately useful for, and remain useful for eltoo style constructions.\r\n\r\nThis is why I'm ok with the proposal as-is, if the annex commitment proves to be a mistake, it can still serve a useful purpose now and into the future, and a second opcode could be introduced to address the annex-less case.\r\n\r\n# Crazy Talk\r\n\r\nI'd like to very tentatively float another way to dodge the annex issue: a hash selector bitfield. To this, instagibbs said something like \"why not go full TXHASH then?\" Unlike TXHASH which has a huge amount of flexibility, a bitfield that permits choosing to commit to all or none of the sequences, all or none of the outputs, and all or none of the annex *should* not change the stopping point. One could also leverage the other five bits of a 1 byte stack item to potentially commit to the first N<32 outpoints, to support the sibling commitments. This last one in particular changes the performance profile of `TEMPLATEHASH` by an order of magnitude (though 5 bits is arbitrary, it could be 1, it could be 32) and drastically increases the surface area to consider, but it might be worth considering if it's useful enough to the BitVM crowd. (The sibling commitment might be well past the point of \"we should just go full TXHASH\" however)\r\n\r\nI can say that for me, committing to all of the outputs but none of the input sequences (and therefore not the input count) would be very useful for one of my projects which currently uses a deleted key ALL|ANYONECANPAY signature.\r\n\r\n# Hashing Performance\r\n\r\nToday one can use the script `PUSHDATA2 0x0802 <520 bytes> DUP SHA256 DROP` to hash 520 bytes, requiring a 526 byte script. Repeating `DUP SHA256 DROP` can cause a verifier to hash 520 more bytes. You can cause a verifier to hash `hashed_bytes(n) = 520 * n` bytes for a script of `script_len(n) = 523 + 3 * n` bytes.\r\n\r\nWith `TEMPLATEHASH` as proposed and implemented, one can use the script `1 TEMPLATEHASH DROP` to hash 109 bytes. Repeating `TEMPLATEHASH DROP` can cause a verifier to hash 109 more bytes. Therefore, you can cause a verifier to hash `hashed_bytes(n) = 2 * n` bytes for a script of `script_len(n) = 2 * n` bytes.\r\n\r\nAt exactly n = 80, the SHA256 script will hash 41600 bytes with a 763 byte script. `TEMPLATEHASH` on the other hand, will hash only 41529 bytes with a 763 byte script, and the SHA256 script's worst case hashing will get considerably worse from there.\r\n\r\nLess naively, one can use the script `PUSHDATA2 0x0802 <520 bytes> 3DUP SHA256 DROP SHA256 DROP SHA256 DROP` to hash 1560 bytes, requiring a 530 byte script. Repeating `3DUP SHA256 DROP SHA256 DROP SHA256 DROP` will cause a verifier to hash 1560 more bytes. This works out to `hashed_bytes(n) = 1560 * n` bytes for a script of length `script_len(n) = 523 + 7 * n` bytes.\r\n\r\nSimilarly, the `TEMPLATEHASH` abusing script can be made more efficient with `1 TEMPLATEHASH TEMPLATEHASH 2DROP` to hash 218 bytes. Repeating `TEMPLATEHASH TEMPLATEHASH 2DROP` can cause a verifier to hash 218 more bytes. Therefore you can cause a verifier to hash `hashed_bytes(n) = 218 * n` bytes for a script of length `script_len(n) = 1 + 3 * n` bytes.\r\n\r\nThe less naive SHA256 script will hash 57720 bytes in 782 script bytes, and the less naive `TEMPLATEHASH` hashes 56898 bytes in 784 script bytes. Once again, beyond this point, the SHA256 script is worse, therefore at the limit of script size, the SHA256 script will be worse.\r\n\r\nI suppose all of that is to say \"This is strictly less hashing than is necessary for other existing operations.\" seems correct, assuming there aren't more clever pathological scripts. Furthermore, the result of `TEMPLATEHASH` would be trivial to cache, while the result of `DUP SHA256 DROP` would be more difficult.\r\n",
      "user": {
        "login": "Ademan",
        "id": 18740,
        "node_id": "MDQ6VXNlcjE4NzQw",
        "avatar_url": "https://avatars.githubusercontent.com/u/18740?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Ademan",
        "html_url": "https://github.com/Ademan",
        "followers_url": "https://api.github.com/users/Ademan/followers",
        "following_url": "https://api.github.com/users/Ademan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Ademan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Ademan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Ademan/subscriptions",
        "organizations_url": "https://api.github.com/users/Ademan/orgs",
        "repos_url": "https://api.github.com/users/Ademan/repos",
        "events_url": "https://api.github.com/users/Ademan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Ademan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bips/pull/1974#issuecomment-3321878856",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/1974"
    }
  ],
  "comments": []
}