{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bips/pulls/1782",
    "id": 2377404829,
    "node_id": "PR_kwDOAN28mc6NtFGd",
    "html_url": "https://github.com/bitcoin/bips/pull/1782",
    "diff_url": "https://github.com/bitcoin/bips/pull/1782.diff",
    "patch_url": "https://github.com/bitcoin/bips/pull/1782.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/1782",
    "commits_url": "https://api.github.com/repos/bitcoin/bips/pulls/1782/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bips/pulls/1782/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bips/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bips/issues/1782/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bips/statuses/0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
    "number": 1782,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "BIP-0094: reformat specification section for clarity and readability",
    "user": {
      "login": "Roasbeef",
      "id": 998190,
      "node_id": "MDQ6VXNlcjk5ODE5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/998190?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Roasbeef",
      "html_url": "https://github.com/Roasbeef",
      "followers_url": "https://api.github.com/users/Roasbeef/followers",
      "following_url": "https://api.github.com/users/Roasbeef/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Roasbeef/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Roasbeef/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Roasbeef/subscriptions",
      "organizations_url": "https://api.github.com/users/Roasbeef/orgs",
      "repos_url": "https://api.github.com/users/Roasbeef/repos",
      "events_url": "https://api.github.com/users/Roasbeef/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Roasbeef/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "In this commit, we restructure the specification section to make the consensus rules clearer and more scannable. The previous section interleaved commentary and historical tidbits with the motivation and new rules, making it difficult to quickly identify the exact rule changes.\r\n\r\nA high level over view the intended changes is as follows:\r\n- Numbers each rule for easier reference\r\n- Adds explicit \"Rule Specification\" sections\r\n- Uses structured lists with MUST statements following RFC/IETF conventions\r\n- Provides a clear problem statement before each solution\r\n- Separates explanatory text from the actual rules\r\n\r\nI was reviewing a PR to btcd to implement testnet4, and found it hard to scan the BIP to find the actual new rules, which inspired this PR. ",
    "labels": [
      {
        "id": 275846070,
        "node_id": "MDU6TGFiZWwyNzU4NDYwNzA=",
        "url": "https://api.github.com/repos/bitcoin/bips/labels/Proposed%20BIP%20modification",
        "name": "Proposed BIP modification",
        "color": "5319e7",
        "default": false
      },
      {
        "id": 286161898,
        "node_id": "MDU6TGFiZWwyODYxNjE4OTg=",
        "url": "https://api.github.com/repos/bitcoin/bips/labels/Pending%20acceptance",
        "name": "Pending acceptance",
        "description": "This BIP modification requires sign-off by the champion of the BIP being modified",
        "color": "fbca04",
        "default": false
      }
    ],
    "created_at": "2025-03-06T23:12:43Z",
    "updated_at": "2025-03-15T16:43:32Z",
    "mergeable": true,
    "mergeable_state": "unstable",
    "merged": false,
    "merge_commit_sha": "b60fe858764c16029fee818c381e0a300a0e7a4b",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Roasbeef:testnet4-spec-reword",
      "ref": "testnet4-spec-reword",
      "sha": "0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
      "user": {
        "login": "Roasbeef",
        "id": 998190,
        "node_id": "MDQ6VXNlcjk5ODE5MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/998190?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Roasbeef",
        "html_url": "https://github.com/Roasbeef",
        "followers_url": "https://api.github.com/users/Roasbeef/followers",
        "following_url": "https://api.github.com/users/Roasbeef/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Roasbeef/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Roasbeef/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Roasbeef/subscriptions",
        "organizations_url": "https://api.github.com/users/Roasbeef/orgs",
        "repos_url": "https://api.github.com/users/Roasbeef/repos",
        "events_url": "https://api.github.com/users/Roasbeef/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Roasbeef/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 51169931,
        "node_id": "MDEwOlJlcG9zaXRvcnk1MTE2OTkzMQ==",
        "name": "bips",
        "full_name": "Roasbeef/bips",
        "owner": {
          "login": "Roasbeef",
          "id": 998190,
          "node_id": "MDQ6VXNlcjk5ODE5MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/998190?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Roasbeef",
          "html_url": "https://github.com/Roasbeef",
          "followers_url": "https://api.github.com/users/Roasbeef/followers",
          "following_url": "https://api.github.com/users/Roasbeef/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Roasbeef/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Roasbeef/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Roasbeef/subscriptions",
          "organizations_url": "https://api.github.com/users/Roasbeef/orgs",
          "repos_url": "https://api.github.com/users/Roasbeef/repos",
          "events_url": "https://api.github.com/users/Roasbeef/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Roasbeef/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/Roasbeef/bips",
        "description": "Bitcoin Improvement Proposals",
        "fork": true,
        "url": "https://api.github.com/repos/Roasbeef/bips",
        "archive_url": "https://api.github.com/repos/Roasbeef/bips/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Roasbeef/bips/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Roasbeef/bips/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Roasbeef/bips/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Roasbeef/bips/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Roasbeef/bips/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Roasbeef/bips/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Roasbeef/bips/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Roasbeef/bips/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Roasbeef/bips/contributors",
        "deployments_url": "https://api.github.com/repos/Roasbeef/bips/deployments",
        "downloads_url": "https://api.github.com/repos/Roasbeef/bips/downloads",
        "events_url": "https://api.github.com/repos/Roasbeef/bips/events",
        "forks_url": "https://api.github.com/repos/Roasbeef/bips/forks",
        "git_commits_url": "https://api.github.com/repos/Roasbeef/bips/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Roasbeef/bips/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Roasbeef/bips/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Roasbeef/bips.git",
        "issue_comment_url": "https://api.github.com/repos/Roasbeef/bips/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Roasbeef/bips/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Roasbeef/bips/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Roasbeef/bips/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Roasbeef/bips/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Roasbeef/bips/languages",
        "merges_url": "https://api.github.com/repos/Roasbeef/bips/merges",
        "milestones_url": "https://api.github.com/repos/Roasbeef/bips/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Roasbeef/bips/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Roasbeef/bips/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Roasbeef/bips/releases%7B/id%7D",
        "ssh_url": "git@github.com:Roasbeef/bips.git",
        "stargazers_url": "https://api.github.com/repos/Roasbeef/bips/stargazers",
        "statuses_url": "https://api.github.com/repos/Roasbeef/bips/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Roasbeef/bips/subscribers",
        "subscription_url": "https://api.github.com/repos/Roasbeef/bips/subscription",
        "tags_url": "https://api.github.com/repos/Roasbeef/bips/tags",
        "teams_url": "https://api.github.com/repos/Roasbeef/bips/teams",
        "trees_url": "https://api.github.com/repos/Roasbeef/bips/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Roasbeef/bips.git",
        "hooks_url": "https://api.github.com/repos/Roasbeef/bips/hooks",
        "svn_url": "https://github.com/Roasbeef/bips",
        "homepage": "bitcoin.org",
        "language": "Go",
        "forks_count": 23,
        "stargazers_count": 64,
        "watchers_count": 64,
        "size": 19360,
        "default_branch": "master",
        "open_issues_count": 4,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-03-06T23:11:46Z",
        "created_at": "2016-02-05T19:45:12Z",
        "updated_at": "2024-10-10T18:47:31Z",
        "allow_forking": true
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "24b4354e64e162ad0154d54f12b29602fe562d9f",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 14531737,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDUzMTczNw==",
        "name": "bips",
        "full_name": "bitcoin/bips",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bips",
        "description": "Bitcoin Improvement Proposals",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bips",
        "archive_url": "https://api.github.com/repos/bitcoin/bips/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bips/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bips/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bips/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bips/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bips/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bips/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bips/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bips/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bips/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bips/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bips/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bips/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bips/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bips/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bips/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bips/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bips.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bips/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bips/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bips/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bips/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bips/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bips/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bips/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bips/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bips/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bips/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bips/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bips.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bips/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bips/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bips/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bips/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bips/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bips/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bips/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bips.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bips/hooks",
        "svn_url": "https://github.com/bitcoin/bips",
        "homepage": "",
        "language": "Wikitext",
        "forks_count": 5530,
        "stargazers_count": 9781,
        "watchers_count": 9781,
        "size": 15357,
        "default_branch": "master",
        "open_issues_count": 35,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": false,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-03-13T19:29:25Z",
        "created_at": "2013-11-19T17:18:41Z",
        "updated_at": "2025-03-15T15:32:00Z",
        "allow_forking": true
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bips/pulls/1782"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 37,
    "deletions": 16,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 3,
    "comments": 2
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAN28mdoAKDBkZDRkM2VjNjEzMDU2MTA0NTRlOTc2Y2Q1ZTkyYTdmYjIzYzM0ZTE",
      "url": "https://api.github.com/repos/bitcoin/bips/git/commits/0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bips/commit/0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
      "tree": {
        "sha": "644f8557b5322d5f5d5a6ed7e6b8d8447021b8ef",
        "url": "https://api.github.com/repos/bitcoin/bips/git/trees/644f8557b5322d5f5d5a6ed7e6b8d8447021b8ef"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 644f8557b5322d5f5d5a6ed7e6b8d8447021b8ef\nparent 24b4354e64e162ad0154d54f12b29602fe562d9f\nauthor Olaoluwa Osuntokun <laolu32@gmail.com> 1741302491 -0800\ncommitter Olaoluwa Osuntokun <laolu32@gmail.com> 1741302694 -0800\n\nBIP-0094: reformat specification section for clarity and readability\n\nRestructured the specification section to make the consensus rules\nclearer and more scannable. The previous section interleaved commentary\nand historical tidbits with the motivation and new rules, making it\ndifficult to quickly identify the exact rule changes.\n\nThe updated format:\n- Numbers each rule for easier reference\n- Adds explicit \"Rule Specification\" sections\n- Uses structured lists with MUST statements following RFC/IETF\n  conventions\n- Provides a clear problem statement before each solution\n- Separates explanatory text from the actual rules\n\nThese changes make it much easier for implementers to understand what\nchanges are required without having to parse through multiple paragraphs\nof text.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQQpYhJoGq3wVlaize6QUl997uCthgUCZ8orpgAKCRCQUl997uCt\nhtDCAP9u4ODAk7pQPC4BG0nrWqeefEzMXZCYu9LLneLrLmTargD+K1HVHnV/LX9f\njs3+MpYR0f1Ba+1IyG20eLPdLTwnxQE=\n=MzgJ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bips/git/commits/24b4354e64e162ad0154d54f12b29602fe562d9f",
          "sha": "24b4354e64e162ad0154d54f12b29602fe562d9f",
          "html_url": "https://github.com/bitcoin/bips/commit/24b4354e64e162ad0154d54f12b29602fe562d9f"
        }
      ],
      "message": "BIP-0094: reformat specification section for clarity and readability\n\nRestructured the specification section to make the consensus rules\nclearer and more scannable. The previous section interleaved commentary\nand historical tidbits with the motivation and new rules, making it\ndifficult to quickly identify the exact rule changes.\n\nThe updated format:\n- Numbers each rule for easier reference\n- Adds explicit \"Rule Specification\" sections\n- Uses structured lists with MUST statements following RFC/IETF\n  conventions\n- Provides a clear problem statement before each solution\n- Separates explanatory text from the actual rules\n\nThese changes make it much easier for implementers to understand what\nchanges are required without having to parse through multiple paragraphs\nof text.",
      "committer": {
        "name": "Olaoluwa Osuntokun",
        "email": "laolu32@gmail.com",
        "date": "2025-03-06T23:11:34Z"
      },
      "author": {
        "name": "Olaoluwa Osuntokun",
        "email": "laolu32@gmail.com",
        "date": "2025-03-06T23:08:11Z"
      },
      "sha": "0dd4d3ec61305610454e976cd5e92a7fb23c34e1"
    },
    {
      "event": "labeled",
      "id": 16625618442,
      "node_id": "LE_lADOAN28mc6s806izwAAAAPe9s4K",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/16625618442",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-07T02:07:33Z",
      "label": {
        "name": "Proposed BIP modification",
        "color": "5319e7"
      }
    },
    {
      "event": "labeled",
      "id": 16625618451,
      "node_id": "LE_lADOAN28mc6s806izwAAAAPe9s4T",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/16625618451",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-07T02:07:33Z",
      "label": {
        "name": "Pending acceptance",
        "color": "fbca04"
      }
    },
    {
      "event": "commented",
      "id": 2705354612,
      "node_id": "IC_kwDOAN28mc6hQG90",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/2705354612",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-07T02:07:48Z",
      "updated_at": "2025-03-07T02:07:48Z",
      "author_association": "MEMBER",
      "body": "cc @fjahr ",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bips/pull/1782#issuecomment-2705354612",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/1782"
    },
    {
      "event": "mentioned",
      "id": 16625620148,
      "node_id": "MEE_lADOAN28mc6s806izwAAAAPe9tS0",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/16625620148",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-07T02:07:49Z"
    },
    {
      "event": "subscribed",
      "id": 16625620160,
      "node_id": "SE_lADOAN28mc6s806izwAAAAPe9tTA",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/16625620160",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-07T02:07:49Z"
    },
    {
      "event": "reviewed",
      "id": 2678939086,
      "node_id": "PRR_kwDOAN28mc6frV3O",
      "url": null,
      "actor": null,
      "commit_id": "0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "I have read the proposed changes, and have the impression that this refactor preserves the content of the Specification, I have however not gone to the level of comparing point-by-point with a checklist. The rewrite makes the rules more obvious which seems like an improvement to me.\r\n\r\nNeeds a sign-off from @fjahr for merge.",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bips/pull/1782#pullrequestreview-2678939086",
      "submitted_at": "2025-03-12T15:31:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bips/pulls/1782"
    },
    {
      "event": "commented",
      "id": 2726776577,
      "node_id": "IC_kwDOAN28mc6ih08B",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/2726776577",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-15T16:43:31Z",
      "updated_at": "2025-03-15T16:43:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK 0dd4d3ec61305610454e976cd5e92a7fb23c34e1\r\n\r\nChanges look good to me, I can re-ack quickly if you want to address @murchandamus 's comments.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bips/pull/1782#issuecomment-2726776577",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/1782"
    },
    {
      "event": "mentioned",
      "id": 16786837012,
      "node_id": "MEE_lADOAN28mc6s806izwAAAAPoks4U",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/16786837012",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-15T16:43:32Z"
    },
    {
      "event": "subscribed",
      "id": 16786837016,
      "node_id": "SE_lADOAN28mc6s806izwAAAAPoks4Y",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/16786837016",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-15T16:43:32Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/1991750793",
      "pull_request_review_id": 2678939086,
      "id": 1991750793,
      "node_id": "PRRC_kwDOAN28mc52t7SJ",
      "diff_hunk": "@@ -36,33 +36,54 @@ Since then the issue with block storms has been further demonstrated on Testnet\n \n == Specification ==\n \n-Consensus of Testnet 4 follows the same rules as mainnet with the exception of the three rules detailed below. Additionally all soft forks that are active on mainnet as of May 2024 are enforced from genesis.\n+Testnet 4 follows the same consensus rules as mainnet with the following three exceptions. Additionally, all soft forks that are active on mainnet as of May 2024 are enforced from genesis.\n \n-=== 20-minute Exception ===\n+=== 1. 20-minute Exception Rule ===\n \n-This rule was already previously implemented and active in Testnet 3<ref>https://github.com/bitcoin/bitcoin/pull/686</ref>.\n+This rule was implemented in Testnet 3<ref>https://github.com/bitcoin/bitcoin/pull/686</ref> and is preserved in Testnet 4.\n \n-A block with a timestamp that is more than 20 minutes past the timestamp of the previous block must have a minimum difficulty of 1 (the network's minimum difficulty) instead of whatever the actual difficulty level currently is. This applies to all blocks in a difficulty period except for the first block. This means the blocks must change their <code>nBits</code> field from the actual difficulty level to the minimum difficulty value <code>0x1d00ffff</code>.\n+==== Rule Specification ====\n \n-This rule also led to the block storms<ref>https://blog.lopp.net/the-block-storms-of-bitcoins-testnet/</ref> which the following rule seeks to fix.\n+1. For any block except the first block in a difficulty period:\n+   a. If the block's timestamp is >20 minutes past the timestamp of the previous block\n+   b. Then the block MUST use the minimum difficulty value (<code>nBits</code> = <code>0x1d00ffff</code>), regardless of the network's actual difficulty\n \n-=== Block Storm Fix ===\n+2. The first block of each difficulty period MUST use the actual network difficulty.\n \n-The work required for a new difficulty period is calculated as multiplication factor to the difficulty of the previous period (but no less than 1/4th and no more than 4x), depending on the duration of the previous difficulty period. On Mainnet and Testnet 3, this factor is applied to the difficulty value of the last block.\n+This rule enables CPU mining on testnet but has led to block storms<ref>https://blog.lopp.net/the-block-storms-of-bitcoins-testnet/</ref> which rule #2 below addresses.\n \n-Block storms happen organically whenever the 20-minute exception is applied to a difficulty period’s last block, causing the block to be mined at a difficulty of 1. The difficulty adjustment rules then limit the subsequent period’s difficulty to a value between 1 (the minimum) and 4. Blocks will be generated rapidly in the subsequent low-difficulty periods while the difficulty climbs back to an adequate range. An arbitrarily large number of blocks can be generated quickly by repeatedly using the 20-minute exception on every last block of difficulty periods. The block storm is then bounded only by miner hash rate, the need for last blocks to have a timestamp 20 minutes after the second to last block, the Median-Time-Past nTime rule, and the requirement that blocks can't be more than 2 hours in the future. Overall a sustained attack would eventually be limited to a maximum cadence of six blocks per second.\n+=== 2. Block Storm Fix ===\n \n-A block storm does not require a time warp attack, but one can be used to amplify<ref>A perpetual block storm attack with entire difficulty periods being authored in less than 3.5 days that resets the difficulty to the minimum in the last block of every difficulty period would adjust to a new actual difficulty of 4 every period. An attacker that additionally leverages a time warp attack would start their attack by holding back timestamps until the latest block’s timestamp is at least two weeks in the past, and then limiting their block rate to six blocks per second, incrementing the timestamp on every sixth block. Only on the last block they would use the current time, which both resets the difficulty to one per the 20-minute exception and would result in a difficulty adjustment keeping the difficulty at the minimum due to the elapsed time exceeding the target. This would allow lower the difficulty for all blocks to difficulty 1 instead of difficulty 4</ref> it.\n+This is a new rule to address block storms caused by the 20-minute exception.\n \n-The mitigation consists of no longer applying the adjustment factor to the last block of the previous difficulty period. Instead, the first block of the difficulty period is used as the base.\n+==== Problem Statement ====\n \n-The first block must contain the actual difficulty of the network and can therefore be used as the base for the calculation of the new difficulty level. Note that the first block in new difficulty period does not allow usage of the 20-minute exception (this is prior behavior). This means that in each difficulty period the first block should always have the actual difficulty even if all other blocks were mined with the 20-minute exception.\n+In Mainnet and Testnet 3, the difficulty adjustment calculation uses the difficulty value of the last block in the previous period as its base. When the 20-minute exception is applied to this last block, it is mined at difficulty 1, causing the next period's difficulty to be constrained between 1-4, leading to block storms.\n \n-=== Time Warp Fix ===\n+==== Rule Specification ====\n \n-In addition to a time warp attack potentially exacerbating the perpetual block storm attack, a time warp attack provides an alternative way to increase the block production rate even if the unintended reset of the actual difficulty due to the 20-minute exception was mitigated.\n+1. For difficulty adjustment calculations between periods:\n+   a. The base difficulty value MUST be taken from the first block of the previous difficulty period\n+   b. NOT from the last block as in previous implementations\n \n-To protect against the time warp attack, the following rule proposed as part of The Great Consensus Cleanup<ref>https://github.com/TheBlueMatt/bips/blob/cleanup-softfork/bip-XXXX.mediawiki</ref> is enforced: \"The nTime field of each block whose height, mod 2016, is 0 must be greater than or equal to the nTime field of the immediately prior block minus 600. For the avoidance of doubt, such blocks must still comply with existing Median-Time-Past nTime restrictions.\"\n+2. The adjustment factor calculation remains unchanged:\n+   a. Multiplication factor based on the duration of the previous difficulty period\n+   b. Limited to no less than 1/4 and no more than 4x\n+\n+This change ensures that the actual network difficulty is used for adjustment calculations rather than potentially manipulated values from the last block in a period.\n+\n+=== 3. Time Warp Attack Prevention ===\n+\n+This rule prevents time warp attacks that could otherwise be used to amplify block storms<ref>A perpetual block storm attack with entire difficulty periods being authored in less than 3.5 days that resets the difficulty to the minimum in the last block of every difficulty period would adjust to a new actual difficulty of 4 every period. An attacker that additionally leverages a time warp attack would start their attack by holding back timestamps until the latest block's timestamp is at least two weeks in the past, and then limiting their block rate to six blocks per second, incrementing the timestamp on every sixth block. Only on the last block they would use the current time, which both resets the difficulty to one per the 20-minute exception and would result in a difficulty adjustment keeping the difficulty at the minimum due to the elapsed time exceeding the target. This would allow lower the difficulty for all blocks to difficulty 1 instead of difficulty 4</ref>.\n+\n+==== Rule Specification ====\n+\n+1. For any block whose height modulo 2016 equals 0 (i.e., the first block of each difficulty period):",
      "path": "bip-0094.mediawiki",
      "position": 60,
      "original_position": 60,
      "commit_id": "0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
      "original_commit_id": "0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I like the \"block height modulo 2016 equals 0\" definition of \"first block\". Perhaps this definition could be introduced in advance of Rule 1 as all three rules make reference to the \"first block\" per this definition.",
      "created_at": "2025-03-12T15:25:17Z",
      "updated_at": "2025-03-12T15:31:07Z",
      "html_url": "https://github.com/bitcoin/bips/pull/1782#discussion_r1991750793",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/1991750793"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/1782"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 81,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/1991753217",
      "pull_request_review_id": 2678939086,
      "id": 1991753217,
      "node_id": "PRRC_kwDOAN28mc52t74B",
      "diff_hunk": "@@ -36,33 +36,54 @@ Since then the issue with block storms has been further demonstrated on Testnet\n \n == Specification ==\n \n-Consensus of Testnet 4 follows the same rules as mainnet with the exception of the three rules detailed below. Additionally all soft forks that are active on mainnet as of May 2024 are enforced from genesis.\n+Testnet 4 follows the same consensus rules as mainnet with the following three exceptions. Additionally, all soft forks that are active on mainnet as of May 2024 are enforced from genesis.\n \n-=== 20-minute Exception ===\n+=== 1. 20-minute Exception Rule ===\n \n-This rule was already previously implemented and active in Testnet 3<ref>https://github.com/bitcoin/bitcoin/pull/686</ref>.\n+This rule was implemented in Testnet 3<ref>https://github.com/bitcoin/bitcoin/pull/686</ref> and is preserved in Testnet 4.\n \n-A block with a timestamp that is more than 20 minutes past the timestamp of the previous block must have a minimum difficulty of 1 (the network's minimum difficulty) instead of whatever the actual difficulty level currently is. This applies to all blocks in a difficulty period except for the first block. This means the blocks must change their <code>nBits</code> field from the actual difficulty level to the minimum difficulty value <code>0x1d00ffff</code>.\n+==== Rule Specification ====\n \n-This rule also led to the block storms<ref>https://blog.lopp.net/the-block-storms-of-bitcoins-testnet/</ref> which the following rule seeks to fix.\n+1. For any block except the first block in a difficulty period:\n+   a. If the block's timestamp is >20 minutes past the timestamp of the previous block\n+   b. Then the block MUST use the minimum difficulty value (<code>nBits</code> = <code>0x1d00ffff</code>), regardless of the network's actual difficulty\n \n-=== Block Storm Fix ===\n+2. The first block of each difficulty period MUST use the actual network difficulty.\n \n-The work required for a new difficulty period is calculated as multiplication factor to the difficulty of the previous period (but no less than 1/4th and no more than 4x), depending on the duration of the previous difficulty period. On Mainnet and Testnet 3, this factor is applied to the difficulty value of the last block.\n+This rule enables CPU mining on testnet but has led to block storms<ref>https://blog.lopp.net/the-block-storms-of-bitcoins-testnet/</ref> which rule #2 below addresses.\n \n-Block storms happen organically whenever the 20-minute exception is applied to a difficulty period’s last block, causing the block to be mined at a difficulty of 1. The difficulty adjustment rules then limit the subsequent period’s difficulty to a value between 1 (the minimum) and 4. Blocks will be generated rapidly in the subsequent low-difficulty periods while the difficulty climbs back to an adequate range. An arbitrarily large number of blocks can be generated quickly by repeatedly using the 20-minute exception on every last block of difficulty periods. The block storm is then bounded only by miner hash rate, the need for last blocks to have a timestamp 20 minutes after the second to last block, the Median-Time-Past nTime rule, and the requirement that blocks can't be more than 2 hours in the future. Overall a sustained attack would eventually be limited to a maximum cadence of six blocks per second.\n+=== 2. Block Storm Fix ===\n \n-A block storm does not require a time warp attack, but one can be used to amplify<ref>A perpetual block storm attack with entire difficulty periods being authored in less than 3.5 days that resets the difficulty to the minimum in the last block of every difficulty period would adjust to a new actual difficulty of 4 every period. An attacker that additionally leverages a time warp attack would start their attack by holding back timestamps until the latest block’s timestamp is at least two weeks in the past, and then limiting their block rate to six blocks per second, incrementing the timestamp on every sixth block. Only on the last block they would use the current time, which both resets the difficulty to one per the 20-minute exception and would result in a difficulty adjustment keeping the difficulty at the minimum due to the elapsed time exceeding the target. This would allow lower the difficulty for all blocks to difficulty 1 instead of difficulty 4</ref> it.",
      "path": "bip-0094.mediawiki",
      "position": 30,
      "original_position": 30,
      "commit_id": "0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
      "original_commit_id": "0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "It seems to me that some of the description of block storms was dropped in the rewrite. Perhaps it could be moved to a footnote or rationale, for readers that are not already familiar with the concept of block storms rather than requiring them to read Lopp’s article.",
      "created_at": "2025-03-12T15:26:27Z",
      "updated_at": "2025-03-12T15:31:07Z",
      "html_url": "https://github.com/bitcoin/bips/pull/1782#discussion_r1991753217",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/1991753217"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/1782"
        }
      },
      "start_line": 53,
      "original_start_line": 53,
      "start_side": "LEFT",
      "line": 55,
      "original_line": 55,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/1997050913",
      "pull_request_review_id": 2688011611,
      "id": 1997050913,
      "node_id": "PRRC_kwDOAN28mc53CJQh",
      "diff_hunk": "@@ -36,33 +36,54 @@ Since then the issue with block storms has been further demonstrated on Testnet\n \n == Specification ==\n \n-Consensus of Testnet 4 follows the same rules as mainnet with the exception of the three rules detailed below. Additionally all soft forks that are active on mainnet as of May 2024 are enforced from genesis.\n+Testnet 4 follows the same consensus rules as mainnet with the following three exceptions. Additionally, all soft forks that are active on mainnet as of May 2024 are enforced from genesis.\n \n-=== 20-minute Exception ===\n+=== 1. 20-minute Exception Rule ===\n \n-This rule was already previously implemented and active in Testnet 3<ref>https://github.com/bitcoin/bitcoin/pull/686</ref>.\n+This rule was implemented in Testnet 3<ref>https://github.com/bitcoin/bitcoin/pull/686</ref> and is preserved in Testnet 4.\n \n-A block with a timestamp that is more than 20 minutes past the timestamp of the previous block must have a minimum difficulty of 1 (the network's minimum difficulty) instead of whatever the actual difficulty level currently is. This applies to all blocks in a difficulty period except for the first block. This means the blocks must change their <code>nBits</code> field from the actual difficulty level to the minimum difficulty value <code>0x1d00ffff</code>.\n+==== Rule Specification ====\n \n-This rule also led to the block storms<ref>https://blog.lopp.net/the-block-storms-of-bitcoins-testnet/</ref> which the following rule seeks to fix.\n+1. For any block except the first block in a difficulty period:\n+   a. If the block's timestamp is >20 minutes past the timestamp of the previous block\n+   b. Then the block MUST use the minimum difficulty value (<code>nBits</code> = <code>0x1d00ffff</code>), regardless of the network's actual difficulty\n \n-=== Block Storm Fix ===\n+2. The first block of each difficulty period MUST use the actual network difficulty.\n \n-The work required for a new difficulty period is calculated as multiplication factor to the difficulty of the previous period (but no less than 1/4th and no more than 4x), depending on the duration of the previous difficulty period. On Mainnet and Testnet 3, this factor is applied to the difficulty value of the last block.\n+This rule enables CPU mining on testnet but has led to block storms<ref>https://blog.lopp.net/the-block-storms-of-bitcoins-testnet/</ref> which rule #2 below addresses.\n \n-Block storms happen organically whenever the 20-minute exception is applied to a difficulty period’s last block, causing the block to be mined at a difficulty of 1. The difficulty adjustment rules then limit the subsequent period’s difficulty to a value between 1 (the minimum) and 4. Blocks will be generated rapidly in the subsequent low-difficulty periods while the difficulty climbs back to an adequate range. An arbitrarily large number of blocks can be generated quickly by repeatedly using the 20-minute exception on every last block of difficulty periods. The block storm is then bounded only by miner hash rate, the need for last blocks to have a timestamp 20 minutes after the second to last block, the Median-Time-Past nTime rule, and the requirement that blocks can't be more than 2 hours in the future. Overall a sustained attack would eventually be limited to a maximum cadence of six blocks per second.\n+=== 2. Block Storm Fix ===\n \n-A block storm does not require a time warp attack, but one can be used to amplify<ref>A perpetual block storm attack with entire difficulty periods being authored in less than 3.5 days that resets the difficulty to the minimum in the last block of every difficulty period would adjust to a new actual difficulty of 4 every period. An attacker that additionally leverages a time warp attack would start their attack by holding back timestamps until the latest block’s timestamp is at least two weeks in the past, and then limiting their block rate to six blocks per second, incrementing the timestamp on every sixth block. Only on the last block they would use the current time, which both resets the difficulty to one per the 20-minute exception and would result in a difficulty adjustment keeping the difficulty at the minimum due to the elapsed time exceeding the target. This would allow lower the difficulty for all blocks to difficulty 1 instead of difficulty 4</ref> it.",
      "path": "bip-0094.mediawiki",
      "position": 30,
      "original_position": 30,
      "commit_id": "0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
      "original_commit_id": "0dd4d3ec61305610454e976cd5e92a7fb23c34e1",
      "in_reply_to_id": 1991753217,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yeah, that would be good. As far as I can remember this was requested by reviewers of the original bip.",
      "created_at": "2025-03-15T16:43:01Z",
      "updated_at": "2025-03-15T16:43:01Z",
      "html_url": "https://github.com/bitcoin/bips/pull/1782#discussion_r1997050913",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/1997050913"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/1782"
        }
      },
      "start_line": 53,
      "original_start_line": 53,
      "start_side": "LEFT",
      "line": 55,
      "original_line": 55,
      "side": "LEFT"
    }
  ]
}