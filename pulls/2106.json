{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bips/pulls/2106",
    "id": 3304794098,
    "node_id": "PR_kwDOAN28mc7E-yfy",
    "html_url": "https://github.com/bitcoin/bips/pull/2106",
    "diff_url": "https://github.com/bitcoin/bips/pull/2106.diff",
    "patch_url": "https://github.com/bitcoin/bips/pull/2106.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/2106",
    "commits_url": "https://api.github.com/repos/bitcoin/bips/pulls/2106/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bips/pulls/2106/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bips/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bips/issues/2106/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bips/statuses/21a297e29c2a03915a19e4085474af6a3f1c0f06",
    "number": 2106,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "BIP-352: introduce per-group recipient limit K_max (=1000)",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "As previously announced in the [libsecp256k1 `silentpayments` module discussion](https://github.com/bitcoin-core/secp256k1/issues/1799#issuecomment-3842046237) and on the [mailing list](https://groups.google.com/g/bitcoindev/c/tgcAQVqvzVg) ~2 weeks ago, this PR introduces a `K_max` limit to BIP-352 to mitigate worst-case scanning time for adversarial transactions. So far [no objections have been raised](https://github.com/bitcoin-core/secp256k1/issues/1799#issuecomment-3891774608) against that protocol change, which is backwards-incompatible in theory.\r\n\r\nThe Python reference implementation is adapted and test vectors for the following two scenarios are added:\r\n* Sending fails if any recipient group (i.e. recipients that share the same scan public key) exceeds the limit\r\n* Scanning only detects outputs with k values up to K_max (exclusive, i.e. from k=0..999), even if more would be available \r\n\r\nCan be tested by running `$ ./bip-0352/reference.py ./bip-0352/send_and_receive_test_vectors.json`. The test vectors pass the tests in the [libsecp256k1 module](https://github.com/bitcoin-core/secp256k1/pull/1765) as well, see commit https://github.com/theStack/secp256k1/commit/7ae84f8971ce36ab5cb9a7af30c436dd42d34ea2. [1] \r\n\r\nNote that the value K_max=1000 is somewhat arbitrary and can still be debated, it's simply one that came up relatively early in the discussion and is believed to be fine even for very unusual scenarios like \"exchange sends to another exchange\"  (see https://github.com/bitcoin-core/secp256k1/issues/1799#issuecomment-3773155788). An alternative number that was brought up later was K_max=2324, as this is the theoretical maximum for standard-sized (i.e. <= 100_000 kvB) transactions (https://github.com/bitcoin-core/secp256k1/issues/1799#issuecomment-3789112995). Personally I think even a lower limit than K_max=1000 would be fine, like something in the \"lower hundreds\" range, but with 1000 we are still comfortably in the \"seconds\" range for the worst-case on a reasonably modern machine. See benchmark results https://github.com/bitcoin-core/secp256k1/pull/1765#issuecomment-3862265628 for more details.\r\n\r\nAnother suggested BIP change is introducing a [warning about wallet interoperability](https://github.com/bitcoin-core/secp256k1/pull/1765#issuecomment-3910051227) w.r.t. the number of labels created. As I see this as an orthogonal change, I will open a separate PR for this. One slightly related PR is https://github.com/bitcoin/bips/pull/2087, which would standardize the EC parts of the reference code and make it look a bit nicer. It's not strictly necessary, but I'm happy to rebase this PR if #2087 gets in first.\r\n\r\n[1] I haven't included this commit in the secp PR yet as it's unclear to me if we want to bloat the repository with >120k new LOC and several mega-bytes of additional test data, considering a test case for this already exists. Something to be discussed further in https://github.com/bitcoin-core/secp256k1/pull/1765.",
    "labels": [],
    "created_at": "2026-02-19T20:22:04Z",
    "updated_at": "2026-02-20T01:13:47Z",
    "mergeable": true,
    "mergeable_state": "clean",
    "merged": false,
    "merge_commit_sha": "d68cbba75a7da527c85a5fc5a0923cc4ce0d6339",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "theStack:bip352_limit_max-k-PR",
      "ref": "bip352_limit_max-k-PR",
      "sha": "21a297e29c2a03915a19e4085474af6a3f1c0f06",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 261818864,
        "node_id": "MDEwOlJlcG9zaXRvcnkyNjE4MTg4NjQ=",
        "name": "bips",
        "full_name": "theStack/bips",
        "owner": {
          "login": "theStack",
          "id": 91535,
          "node_id": "MDQ6VXNlcjkxNTM1",
          "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/theStack",
          "html_url": "https://github.com/theStack",
          "followers_url": "https://api.github.com/users/theStack/followers",
          "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
          "organizations_url": "https://api.github.com/users/theStack/orgs",
          "repos_url": "https://api.github.com/users/theStack/repos",
          "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/theStack/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/theStack/bips",
        "description": "Bitcoin Improvement Proposals",
        "fork": true,
        "url": "https://api.github.com/repos/theStack/bips",
        "archive_url": "https://api.github.com/repos/theStack/bips/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/theStack/bips/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/theStack/bips/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/theStack/bips/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/theStack/bips/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/theStack/bips/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/theStack/bips/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/theStack/bips/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/theStack/bips/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/theStack/bips/contributors",
        "deployments_url": "https://api.github.com/repos/theStack/bips/deployments",
        "downloads_url": "https://api.github.com/repos/theStack/bips/downloads",
        "events_url": "https://api.github.com/repos/theStack/bips/events",
        "forks_url": "https://api.github.com/repos/theStack/bips/forks",
        "git_commits_url": "https://api.github.com/repos/theStack/bips/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/theStack/bips/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/theStack/bips/git/tags%7B/sha%7D",
        "git_url": "git://github.com/theStack/bips.git",
        "issue_comment_url": "https://api.github.com/repos/theStack/bips/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/theStack/bips/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/theStack/bips/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/theStack/bips/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/theStack/bips/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/theStack/bips/languages",
        "merges_url": "https://api.github.com/repos/theStack/bips/merges",
        "milestones_url": "https://api.github.com/repos/theStack/bips/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/theStack/bips/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/theStack/bips/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/theStack/bips/releases%7B/id%7D",
        "ssh_url": "git@github.com:theStack/bips.git",
        "stargazers_url": "https://api.github.com/repos/theStack/bips/stargazers",
        "statuses_url": "https://api.github.com/repos/theStack/bips/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/theStack/bips/subscribers",
        "subscription_url": "https://api.github.com/repos/theStack/bips/subscription",
        "tags_url": "https://api.github.com/repos/theStack/bips/tags",
        "teams_url": "https://api.github.com/repos/theStack/bips/teams",
        "trees_url": "https://api.github.com/repos/theStack/bips/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/theStack/bips.git",
        "hooks_url": "https://api.github.com/repos/theStack/bips/hooks",
        "svn_url": "https://github.com/theStack/bips",
        "homepage": "",
        "language": "Wikitext",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 21754,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-19T19:08:34Z",
        "created_at": "2020-05-06T16:35:59Z",
        "updated_at": "2026-01-20T15:05:24Z",
        "allow_forking": true
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "97781eae4d368024b65d11b4b4301e3885d3bc05",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 14531737,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDUzMTczNw==",
        "name": "bips",
        "full_name": "bitcoin/bips",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bips",
        "description": "Bitcoin Improvement Proposals",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bips",
        "archive_url": "https://api.github.com/repos/bitcoin/bips/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bips/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bips/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bips/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bips/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bips/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bips/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bips/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bips/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bips/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bips/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bips/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bips/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bips/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bips/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bips/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bips/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bips.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bips/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bips/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bips/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bips/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bips/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bips/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bips/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bips/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bips/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bips/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bips/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bips.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bips/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bips/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bips/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bips/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bips/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bips/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bips/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bips.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bips/hooks",
        "svn_url": "https://github.com/bitcoin/bips",
        "homepage": "",
        "language": "Wikitext",
        "forks_count": 5908,
        "stargazers_count": 10587,
        "watchers_count": 10587,
        "size": 21480,
        "default_branch": "master",
        "open_issues_count": 74,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": false,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-02-13T19:18:59Z",
        "created_at": "2013-11-19T17:18:41Z",
        "updated_at": "2026-02-20T01:12:21Z",
        "allow_forking": true
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bips/pulls/2106"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 11097,
    "deletions": 0,
    "changed_files": 3,
    "commits": 3,
    "review_comments": 0,
    "comments": 2
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAN28mdoAKDA3N2EwNGU2YmJjOGZmM2Q4Y2ZlNmIxNDQ3ZGJmMDY5ZDcyMWIyMjE",
      "url": "https://api.github.com/repos/bitcoin/bips/git/commits/077a04e6bbc8ff3d8cfe6b1447dbf069d721b221",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bips/commit/077a04e6bbc8ff3d8cfe6b1447dbf069d721b221",
      "tree": {
        "sha": "327e3d7ce5c72451fc62a6824af9fec2dabc70bf",
        "url": "https://api.github.com/repos/bitcoin/bips/git/trees/327e3d7ce5c72451fc62a6824af9fec2dabc70bf"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bips/git/commits/97781eae4d368024b65d11b4b4301e3885d3bc05",
          "sha": "97781eae4d368024b65d11b4b4301e3885d3bc05",
          "html_url": "https://github.com/bitcoin/bips/commit/97781eae4d368024b65d11b4b4301e3885d3bc05"
        }
      ],
      "message": "BIP-352: introduce per-group recipient limit K_max (=1000)\n\nIn theory this is a backwards incompatible protocol change.\nPractically, no existing Silent Payments wallets out there supports\nsending to such a high quantity of recipients (not even in terms of\n_total_ number of recipients), so the K_max limit should be safe to\nintroduce, without any negative effects in the wallet ecosystem.",
      "committer": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2026-02-19T15:46:29Z"
      },
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2026-01-30T00:46:35Z"
      },
      "sha": "077a04e6bbc8ff3d8cfe6b1447dbf069d721b221"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAN28mdoAKDcxZTkwMDYwOWQ0NmRmYTkzZTk2NzA4YjEwNTk2ZmUxZmE5NWFhNzk",
      "url": "https://api.github.com/repos/bitcoin/bips/git/commits/71e900609d46dfa93e96708b10596fe1fa95aa79",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bips/commit/71e900609d46dfa93e96708b10596fe1fa95aa79",
      "tree": {
        "sha": "8372742f6bac9bfcde24b3ab55fe9c6f0712a40a",
        "url": "https://api.github.com/repos/bitcoin/bips/git/trees/8372742f6bac9bfcde24b3ab55fe9c6f0712a40a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bips/git/commits/077a04e6bbc8ff3d8cfe6b1447dbf069d721b221",
          "sha": "077a04e6bbc8ff3d8cfe6b1447dbf069d721b221",
          "html_url": "https://github.com/bitcoin/bips/commit/077a04e6bbc8ff3d8cfe6b1447dbf069d721b221"
        }
      ],
      "message": "BIP-352: add test vector for exceeding K_max limit [sender side]\n\nTest case: as the (only) recipient group contains 1001 addresses and\nthus exceeds the K_max limit by one, sending fails.\n\nCan be tested by\n`$ ./bip-0352/reference.py ./bip-0352/send_and_receive_test_vectors.json`",
      "committer": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2026-02-19T18:40:19Z"
      },
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2026-02-19T15:39:24Z"
      },
      "sha": "71e900609d46dfa93e96708b10596fe1fa95aa79"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAN28mdoAKDIxYTI5N2UyOWMyYTAzOTE1YTE5ZTQwODU0NzRhZjZhM2YxYzBmMDY",
      "url": "https://api.github.com/repos/bitcoin/bips/git/commits/21a297e29c2a03915a19e4085474af6a3f1c0f06",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bips/commit/21a297e29c2a03915a19e4085474af6a3f1c0f06",
      "tree": {
        "sha": "847b8dec32f30e76e454e5c5f766e3be8a5842d5",
        "url": "https://api.github.com/repos/bitcoin/bips/git/trees/847b8dec32f30e76e454e5c5f766e3be8a5842d5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bips/git/commits/71e900609d46dfa93e96708b10596fe1fa95aa79",
          "sha": "71e900609d46dfa93e96708b10596fe1fa95aa79",
          "html_url": "https://github.com/bitcoin/bips/commit/71e900609d46dfa93e96708b10596fe1fa95aa79"
        }
      ],
      "message": "BIP-352: add test vector for exceeding K_max limit [receiver side]\n\nTest case: even though there are 1001 outputs targeted to the recipient,\nonly 1000 are found due to the introduced K_max limit. Any\nimplementation following the new BIP protocol rule wouldn't create such\na transaction in the first place, but an attacker might do.\n\nCan be tested by\n`$ ./bip-0352/reference.py ./bip-0352/send_and_receive_test_vectors.json`",
      "committer": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2026-02-19T18:41:28Z"
      },
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2026-02-19T18:37:47Z"
      },
      "sha": "21a297e29c2a03915a19e4085474af6a3f1c0f06"
    },
    {
      "event": "commented",
      "id": 3930014835,
      "node_id": "IC_kwDOAN28mc7qP0Rz",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/3930014835",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-19T21:03:24Z",
      "updated_at": "2026-02-19T21:04:31Z",
      "author_association": "MEMBER",
      "body": "I guess I misunderstood so far what kind of limit you were looking to impose. I thought that Silent Payment transactions would generally be limited to 1000 outputs. \r\n\r\nIf a malicious party were to send 1000 outputs to two recipients, they’d incur a 2×1000² validation time on two recipients, or a 2²×1000² total validation time. If they make an oversized transaction and send 1000 outputs each to 23 recipients, each of the 23 recipients would have 23×1000² total validation time. So, the total validation time is still quadratic, but distributed to multiple recipients, but it gets worse for each recipient the more recipients there are. Wouldn’t it be better to just limit silent payment transactions to 1000 outputs? It’s not like that would make Silent Payment transactions stick out like a sore thumb. ;)",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bips/pull/2106#issuecomment-3930014835",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/2106"
    },
    {
      "event": "commented",
      "id": 3931019868,
      "node_id": "IC_kwDOAN28mc7qTppc",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/3931019868",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T01:11:08Z",
      "updated_at": "2026-02-20T01:13:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I guess I misunderstood so far what kind of limit you were looking to impose. I thought that Silent Payment transactions would generally be limited to 1000 outputs.\r\n\r\nLimiting the total number of transaction outputs for Silent Payments eligibility might be a possible alternative, but it seems to be more restrictive in terms of composability. There is currently no rule that in a Silent Payments transaction all (taproot) outputs have to be Silent Payments related, users are free to combine it with an arbitrary number of non-Silent-Payments outputs. Considering this, can we be sure that a total tx output limit would never cause unintended problems in any wallet flow? It could e.g. happen that a user first creates exactly N_max [1] outputs with a Silent Payments library, and then some collaborative protocol adds another unrelated taproot output on top, without necessarily being aware that the already existing outputs even have a Silent Payments context (they just look like random taproot outputs). In that scenario the Silent Payments recipients wouldn't get paid, as the resulting transaction isn't considered Silent Payments eligible, due to having N_max+1 outputs and thus exceeding the limit. (Slightly related: https://github.com/bitcoin/bips/pull/2055#discussion_r2692907049).\r\n\r\nThat said, I'm not too familiar with concrete collaboration protocols and flows, so the scenario I painted might also be a bit far-fetched, especially since it must be a single entity having control over all the inputs private keys (as otherwise it couldn't have created the Silent Payments outputs in the first place). When thinking about simpler solutions, one obvious idea would be to limit the size of Silent Payments eligible transactions to 100 kvB. No matter what protocols are in use, it seems at least very unlikely to me that any of them would at the end not respect the current policy limit and create a tx that would likely not be relayed and need out-of-band miner communication. On the other hand, no policy limit is set in stone, so in some sense even that would potentially restrict flexibility for the future. :man_shrugging:\r\nI remember having discussed this with @RubenSomsen a while ago, who likely has more convincing arguments for K_max.\r\n\r\n[1] using the N_max notion for your \"limit total outputs\" proposal to differentiate it from the K_max one",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bips/pull/2106#issuecomment-3931019868",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/2106"
    },
    {
      "event": "mentioned",
      "id": 22934127997,
      "node_id": "MEE_lADOAN28mc7sU8z4zwAAAAVW-wV9",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/22934127997",
      "actor": {
        "login": "RubenSomsen",
        "id": 9066803,
        "node_id": "MDQ6VXNlcjkwNjY4MDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9066803?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RubenSomsen",
        "html_url": "https://github.com/RubenSomsen",
        "followers_url": "https://api.github.com/users/RubenSomsen/followers",
        "following_url": "https://api.github.com/users/RubenSomsen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/RubenSomsen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/RubenSomsen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/RubenSomsen/subscriptions",
        "organizations_url": "https://api.github.com/users/RubenSomsen/orgs",
        "repos_url": "https://api.github.com/users/RubenSomsen/repos",
        "events_url": "https://api.github.com/users/RubenSomsen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/RubenSomsen/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T01:11:09Z"
    },
    {
      "event": "subscribed",
      "id": 22934128010,
      "node_id": "SE_lADOAN28mc7sU8z4zwAAAAVW-wWK",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/22934128010",
      "actor": {
        "login": "RubenSomsen",
        "id": 9066803,
        "node_id": "MDQ6VXNlcjkwNjY4MDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9066803?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RubenSomsen",
        "html_url": "https://github.com/RubenSomsen",
        "followers_url": "https://api.github.com/users/RubenSomsen/followers",
        "following_url": "https://api.github.com/users/RubenSomsen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/RubenSomsen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/RubenSomsen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/RubenSomsen/subscriptions",
        "organizations_url": "https://api.github.com/users/RubenSomsen/orgs",
        "repos_url": "https://api.github.com/users/RubenSomsen/repos",
        "events_url": "https://api.github.com/users/RubenSomsen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/RubenSomsen/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-02-20T01:11:09Z"
    }
  ],
  "comments": []
}