{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bips/pulls/961",
    "id": 462040259,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NDYyMDQwMjU5",
    "html_url": "https://github.com/bitcoin/bips/pull/961",
    "diff_url": "https://github.com/bitcoin/bips/pull/961.diff",
    "patch_url": "https://github.com/bitcoin/bips/pull/961.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/961",
    "commits_url": "https://api.github.com/repos/bitcoin/bips/pulls/961/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bips/pulls/961/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bips/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bips/issues/961/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bips/statuses/1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
    "number": 961,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "Bip339: small corrections and update spec to match implementation",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Updates text to match implementation, specifically that it's always permitted to request a transaction using the txid. Also includes some minor tidy-ups.",
    "labels": [],
    "created_at": "2020-08-03T08:48:45Z",
    "updated_at": "2020-08-08T16:57:08Z",
    "closed_at": "2020-08-08T16:57:08Z",
    "mergeable_state": "unknown",
    "merge_commit_sha": "0e5134e651e3e52646f8a3b23c55d9d846c48644",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "jnewbery:bip339-txid-relay",
      "ref": "bip339-txid-relay",
      "sha": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 69679743,
        "node_id": "MDEwOlJlcG9zaXRvcnk2OTY3OTc0Mw==",
        "name": "bips",
        "full_name": "jnewbery/bips",
        "owner": {
          "login": "jnewbery",
          "id": 1063656,
          "node_id": "MDQ6VXNlcjEwNjM2NTY=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jnewbery",
          "html_url": "https://github.com/jnewbery",
          "followers_url": "https://api.github.com/users/jnewbery/followers",
          "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
          "organizations_url": "https://api.github.com/users/jnewbery/orgs",
          "repos_url": "https://api.github.com/users/jnewbery/repos",
          "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/jnewbery/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/jnewbery/bips",
        "description": "Bitcoin Improvement Proposals",
        "fork": true,
        "url": "https://api.github.com/repos/jnewbery/bips",
        "archive_url": "https://api.github.com/repos/jnewbery/bips/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/jnewbery/bips/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/jnewbery/bips/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/jnewbery/bips/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/jnewbery/bips/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/jnewbery/bips/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/jnewbery/bips/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/jnewbery/bips/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/jnewbery/bips/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/jnewbery/bips/contributors",
        "deployments_url": "https://api.github.com/repos/jnewbery/bips/deployments",
        "downloads_url": "https://api.github.com/repos/jnewbery/bips/downloads",
        "events_url": "https://api.github.com/repos/jnewbery/bips/events",
        "forks_url": "https://api.github.com/repos/jnewbery/bips/forks",
        "git_commits_url": "https://api.github.com/repos/jnewbery/bips/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/jnewbery/bips/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/jnewbery/bips/git/tags%7B/sha%7D",
        "git_url": "git://github.com/jnewbery/bips.git",
        "issue_comment_url": "https://api.github.com/repos/jnewbery/bips/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/jnewbery/bips/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/jnewbery/bips/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/jnewbery/bips/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/jnewbery/bips/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/jnewbery/bips/languages",
        "merges_url": "https://api.github.com/repos/jnewbery/bips/merges",
        "milestones_url": "https://api.github.com/repos/jnewbery/bips/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/jnewbery/bips/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/jnewbery/bips/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/jnewbery/bips/releases%7B/id%7D",
        "ssh_url": "git@github.com:jnewbery/bips.git",
        "stargazers_url": "https://api.github.com/repos/jnewbery/bips/stargazers",
        "statuses_url": "https://api.github.com/repos/jnewbery/bips/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/jnewbery/bips/subscribers",
        "subscription_url": "https://api.github.com/repos/jnewbery/bips/subscription",
        "tags_url": "https://api.github.com/repos/jnewbery/bips/tags",
        "teams_url": "https://api.github.com/repos/jnewbery/bips/teams",
        "trees_url": "https://api.github.com/repos/jnewbery/bips/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/jnewbery/bips.git",
        "hooks_url": "https://api.github.com/repos/jnewbery/bips/hooks",
        "svn_url": "https://github.com/jnewbery/bips",
        "homepage": "bitcoin.org",
        "language": "Python",
        "forks_count": 1,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 14256,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-04-03T09:35:18Z",
        "created_at": "2016-09-30T15:44:54Z",
        "updated_at": "2016-09-30T15:44:56Z"
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "b4dddbcf75c47cdb02643d5f70f9f5054ab7b6b0",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 14531737,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDUzMTczNw==",
        "name": "bips",
        "full_name": "bitcoin/bips",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bips",
        "description": "Bitcoin Improvement Proposals",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bips",
        "archive_url": "https://api.github.com/repos/bitcoin/bips/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bips/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bips/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bips/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bips/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bips/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bips/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bips/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bips/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bips/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bips/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bips/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bips/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bips/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bips/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bips/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bips/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bips.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bips/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bips/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bips/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bips/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bips/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bips/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bips/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bips/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bips/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bips/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bips/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bips.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bips/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bips/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bips/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bips/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bips/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bips/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bips/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bips.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bips/hooks",
        "svn_url": "https://github.com/bitcoin/bips",
        "homepage": "",
        "language": "Wikitext",
        "forks_count": 5535,
        "stargazers_count": 8220,
        "watchers_count": 8220,
        "size": 13787,
        "default_branch": "master",
        "open_issues_count": 112,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": false,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-01T12:09:15Z",
        "created_at": "2013-11-19T17:18:41Z",
        "updated_at": "2023-08-01T09:08:43Z"
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 5,
    "deletions": 4,
    "changed_files": 1,
    "commits": 3,
    "review_comments": 26,
    "comments": 5
  },
  "events": [
    {
      "event": "commented",
      "id": 667895781,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2Nzg5NTc4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/667895781",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T08:48:54Z",
      "updated_at": "2020-08-03T08:48:54Z",
      "author_association": "MEMBER",
      "body": "cc @sdaftuar @sipa ",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bips/pull/961#issuecomment-667895781",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/961"
    },
    {
      "event": "mentioned",
      "id": 3614926018,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYxNDkyNjAxOA==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3614926018",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T08:48:54Z"
    },
    {
      "event": "subscribed",
      "id": 3614926026,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MTQ5MjYwMjY=",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3614926026",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T08:48:54Z"
    },
    {
      "event": "mentioned",
      "id": 3614926034,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYxNDkyNjAzNA==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3614926034",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T08:48:54Z"
    },
    {
      "event": "subscribed",
      "id": 3614926035,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MTQ5MjYwMzU=",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3614926035",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T08:48:54Z"
    },
    {
      "event": "reviewed",
      "id": 460161513,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTYxNTEz",
      "url": null,
      "actor": null,
      "commit_id": "c15fa540a20d96bf838ec3ec8cd93931e04c9c65",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "The first commit seems unnecessary to me; I just took a quick look through the BIP repo and several other BIPs that introduce new p2p messages also use lower case (sendheaders BIP 130, feefilter BIP 133, compact blocks BIP 152) -- which is also what we send on the wire.  It doesn't really matter but if it were up to me I'd just stick with lower case for consistency.\r\n\r\nEDIT: Hah, you were making it consistent with the other p2p messages in this doc, not with other BIPs!  Oops.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bips/pull/961#pullrequestreview-460161513",
      "submitted_at": "2020-08-03T17:08:40Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bips/pulls/961"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3617066513,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzYxNzA2NjUxMw==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3617066513",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T18:15:26Z"
    },
    {
      "event": "commented",
      "id": 668169006,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODE2OTAwNg==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/668169006",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T18:15:53Z",
      "updated_at": "2020-08-03T18:15:53Z",
      "author_association": "MEMBER",
      "body": "Thanks for the review @sdaftuar . I've addressed all of your review comments.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bips/pull/961#issuecomment-668169006",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/961"
    },
    {
      "event": "mentioned",
      "id": 3617067975,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYxNzA2Nzk3NQ==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3617067975",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T18:15:54Z"
    },
    {
      "event": "subscribed",
      "id": 3617067978,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MTcwNjc5Nzg=",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3617067978",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T18:15:54Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTQ1MzE3Mzc6NWRkMzFmZGYwZTc0MGEwNWQ5ZGUwOGFlZTRlN2M2NGYzMjVjMGI1YQ==",
      "url": "https://api.github.com/repos/bitcoin/bips/git/commits/5dd31fdf0e740a05d9de08aee4e7c64f325c0b5a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bips/commit/5dd31fdf0e740a05d9de08aee4e7c64f325c0b5a",
      "tree": {
        "sha": "993f3c0a9132fa8eaad373110ac3dea6e89308bb",
        "url": "https://api.github.com/repos/bitcoin/bips/git/trees/993f3c0a9132fa8eaad373110ac3dea6e89308bb"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bips/git/commits/c134a853a9fc06572617b6a3d344f0a415ec7dc5",
          "sha": "c134a853a9fc06572617b6a3d344f0a415ec7dc5",
          "html_url": "https://github.com/bitcoin/bips/commit/c134a853a9fc06572617b6a3d344f0a415ec7dc5"
        }
      ],
      "message": "BIP339: consistent capitalization\n\nUse lowercase for message types.",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-08-03T19:48:23Z"
      },
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-08-03T08:43:35Z"
      },
      "sha": "5dd31fdf0e740a05d9de08aee4e7c64f325c0b5a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3617371558,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzYxNzM3MTU1OA==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3617371558",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T19:54:04Z"
    },
    {
      "event": "commented",
      "id": 668212165,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODIxMjE2NQ==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/668212165",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T19:55:42Z",
      "updated_at": "2020-08-03T19:55:42Z",
      "author_association": "MEMBER",
      "body": "> I just took a quick look through the BIP repo and several other BIPs that introduce new p2p messages also use lower case (sendheaders BIP 130, feefilter BIP 133, compact blocks BIP 152) -- which is also what we send on the wire\r\n\r\nI mostly wanted these to be internally consistent within the document, so that it's clear that they're referring to the same concept. Most of the message types in this doc were uppercase which is why I standardized to that, but you're right that lowercase is better. I've updated the first commit to do that.",
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bips/pull/961#issuecomment-668212165",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/961"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3617432381,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzYxNzQzMjM4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3617432381",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-03T20:13:39Z"
    },
    {
      "event": "reviewed",
      "id": 460725223,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNzI1MjIz",
      "url": null,
      "actor": null,
      "commit_id": "2f9649fcd9ddd6800a12d6d9ea4fe1a5fea24b61",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK, some nits if you agree and retouch.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bips/pull/961#pullrequestreview-460725223",
      "submitted_at": "2020-08-04T11:41:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bips/pulls/961"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTQ1MzE3Mzc6NGQ1M2ZlNGVhY2Q5YjRjYjVlNjQwNTg5ODgxMzlmNjNiMjNmNDAxZg==",
      "url": "https://api.github.com/repos/bitcoin/bips/git/commits/4d53fe4eacd9b4cb5e64058988139f63b23f401f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bips/commit/4d53fe4eacd9b4cb5e64058988139f63b23f401f",
      "tree": {
        "sha": "ad8ce2def4a30ff4cf555f5b7ba632cf7a08e27f",
        "url": "https://api.github.com/repos/bitcoin/bips/git/trees/ad8ce2def4a30ff4cf555f5b7ba632cf7a08e27f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bips/git/commits/5dd31fdf0e740a05d9de08aee4e7c64f325c0b5a",
          "sha": "5dd31fdf0e740a05d9de08aee4e7c64f325c0b5a",
          "html_url": "https://github.com/bitcoin/bips/commit/5dd31fdf0e740a05d9de08aee4e7c64f325c0b5a"
        }
      ],
      "message": "BIP339: clarify handshake",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-08-04T13:42:03Z"
      },
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-08-03T08:44:47Z"
      },
      "sha": "4d53fe4eacd9b4cb5e64058988139f63b23f401f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTQ1MzE3Mzc6MWVlZTFiMWZhZTI5YjllM2U2YTk1YmRjNjBmZTEwZGI2ZDY2N2U2YQ==",
      "url": "https://api.github.com/repos/bitcoin/bips/git/commits/1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bips/commit/1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "tree": {
        "sha": "adc88ee2a56a844a8f700d037ea1f57df9a134be",
        "url": "https://api.github.com/repos/bitcoin/bips/git/trees/adc88ee2a56a844a8f700d037ea1f57df9a134be"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bips/git/commits/4d53fe4eacd9b4cb5e64058988139f63b23f401f",
          "sha": "4d53fe4eacd9b4cb5e64058988139f63b23f401f",
          "html_url": "https://github.com/bitcoin/bips/commit/4d53fe4eacd9b4cb5e64058988139f63b23f401f"
        }
      ],
      "message": "BIP339: clarify fetching\n\nA node may always fetch a transactions using the txid.",
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-08-04T13:42:07Z"
      },
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2020-08-03T08:46:08Z"
      },
      "sha": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3620301949,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzYyMDMwMTk0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3620301949",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-04T13:43:36Z"
    },
    {
      "event": "commented",
      "id": 668627192,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2ODYyNzE5Mg==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/668627192",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-04T14:23:41Z",
      "updated_at": "2020-08-04T14:23:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK, looks like a net improvement (pun intended)",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bips/pull/961#issuecomment-668627192",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/961"
    },
    {
      "event": "reviewed",
      "id": 460983161,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwOTgzMTYx",
      "url": null,
      "actor": null,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bips/pull/961#pullrequestreview-460983161",
      "submitted_at": "2020-08-04T16:36:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bips/pulls/961"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-07T19:40:53Z",
      "updated_at": "2020-08-07T19:40:53Z",
      "source": {
        "issue": {
          "id": 675235207,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDY0Nzg1OTA5",
          "url": "https://api.github.com/repos/bitcoin/bips/issues/966",
          "repository_url": "https://api.github.com/repos/bitcoin/bips",
          "labels_url": "https://api.github.com/repos/bitcoin/bips/issues/966/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bips/issues/966/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bips/issues/966/events",
          "html_url": "https://github.com/bitcoin/bips/pull/966",
          "number": 966,
          "state": "closed",
          "state_reason": null,
          "title": "BIP 339 clarifications",
          "body": "Thanks @jnewbery for making the initial edits in #961; I went ahead and made the last edit I wanted in here to clarify the specification.",
          "user": {
            "login": "sdaftuar",
            "id": 7463573,
            "node_id": "MDQ6VXNlcjc0NjM1NzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sdaftuar",
            "html_url": "https://github.com/sdaftuar",
            "followers_url": "https://api.github.com/users/sdaftuar/followers",
            "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
            "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
            "repos_url": "https://api.github.com/users/sdaftuar/repos",
            "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 0,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bips/pulls/966",
            "html_url": "https://github.com/bitcoin/bips/pull/966",
            "diff_url": "https://github.com/bitcoin/bips/pull/966.diff",
            "patch_url": "https://github.com/bitcoin/bips/pull/966.patch"
          },
          "closed_at": "2020-08-20T22:16:12Z",
          "created_at": "2020-08-07T19:40:53Z",
          "updated_at": "2020-08-20T22:16:12Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 670681814,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY3MDY4MTgxNA==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/comments/670681814",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-07T19:41:21Z",
      "updated_at": "2020-08-07T19:41:21Z",
      "author_association": "MEMBER",
      "body": "FYI - I picked this up in #966.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bips/pull/961#issuecomment-670681814",
      "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/961"
    },
    {
      "event": "closed",
      "id": 3635839170,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzYzNTgzOTE3MA==",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/3635839170",
      "actor": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-08T16:57:08Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464518209",
      "pull_request_review_id": 460161513,
      "id": 464518209,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUxODIwOQ==",
      "diff_hunk": "@@ -41,7 +41,7 @@ announcing and fetching transactions.\n \n # A new WTXIDRELAY message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The WTXIDRELAY message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n+# The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "c15fa540a20d96bf838ec3ec8cd93931e04c9c65",
      "in_reply_to_id": null,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The first \"must\" should remain \"must\" -- I don't see how software can advertise itself as having implemented this BIP yet not comply with that requirement.  Am I missing something?\r\n\r\nThe sentence you added here looks good.",
      "created_at": "2020-08-03T16:18:49Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464518209",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464518209"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464519119",
      "pull_request_review_id": 460161513,
      "id": 464519119,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUxOTExOQ==",
      "diff_hunk": "@@ -43,7 +43,8 @@ announcing and fetching transactions.\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n # The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.\n # A new inv type MSG_WTX (0x00000005) is added, for use in both INV messages and GETDATA requests, indicating that the hash being referenced is a transaction's wtxid. In the case of GETDATA requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a WTXIDRELAY message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# After a node has received a WTXIDRELAY message from a peer, the node SHOULD use the MSG_WTX inv-type when announcing transactions to that peer.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "f543c41e29b472eb4c436873921c07005914e140",
      "in_reply_to_id": null,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why the relaxation to SHOULD here?  Bitcoin Core's implementation doesn't do this, and I thought that several reviewers (including yourself) were in favor of stricter requirements where possible for stuff like this.\r\n\r\nIn particular, after negotiating wtxid-relay with a peer, Bitcoin Core will not process non-MSG_WTX announcements from that peer at all.\r\n\r\nAlso, why delete the requirement to request announced transactions from that peer using MSG_WTX getdata messages?  I think if we were to clarify this to match the current spec, we'd just make it clear that this applies to recently announced transactions, with no promises on older ones (see my next review comment).",
      "created_at": "2020-08-03T16:20:18Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464519119",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464519119"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464530563",
      "pull_request_review_id": 460161513,
      "id": 464530563,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUzMDU2Mw==",
      "diff_hunk": "@@ -43,7 +43,8 @@ announcing and fetching transactions.\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n # The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.\n # A new inv type MSG_WTX (0x00000005) is added, for use in both INV messages and GETDATA requests, indicating that the hash being referenced is a transaction's wtxid. In the case of GETDATA requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a WTXIDRELAY message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# After a node has received a WTXIDRELAY message from a peer, the node SHOULD use the MSG_WTX inv-type when announcing transactions to that peer.\n+# After receiving an INV message containing a MSG_WTX object, a node MAY request the announced transactions from that peer using MSG_WTX GETDATA message. A node MAY still request transactions from that peer using MSG_TX GETDATA messages, for example to fetch the parents of orphan transactions.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 6,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "f543c41e29b472eb4c436873921c07005914e140",
      "in_reply_to_id": null,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm not sure these sentences are the best way to describe the behavior.  What I would have said, if someone thought the doc needed more clarity here, would be something like:\r\n\r\n> After receiving an INV message containing a MSG_WTX object, a node SHOULD use a MSG_WTX GETDATA message to request any announced transactions.  A node MAY still request transactions from that peer using MSG_TX GETDATA messages, such as for transactions not recently announced by that peer (like the parents of recently announced transactions).\r\n\r\nTo me, that implies that if a node makes a non-MSG_WTX GETDATA request, then they may not end up receiving the transaction they're looking for even if it was recently announced; but a peer that implements this BIP shouldn't disconnect or stop transaction relay with a peer just because they received such a GETDATA request.\r\n\r\nWith your language of using MAY instead of SHOULD, I read that as meaning that software implementing this BIP effectively MUST be able to produce a transaction regardless of whether it's requested by MSG_WTX or MSG_TX -- which seems overly strict on how the implementations should be written.",
      "created_at": "2020-08-03T16:41:09Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464530563",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464530563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 47,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464537095",
      "pull_request_review_id": 460161513,
      "id": 464537095,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUzNzA5NQ==",
      "diff_hunk": "@@ -52,7 +52,7 @@ As wtxid-based transaction relay is only enabled between peers that both support\n \n ==Implementation==\n \n-https://github.com/bitcoin/bitcoin/pull/18044\n+https://github.com/bitcoin/bitcoin/pull/18044 and https://github.com/bitcoin/bitcoin/pull/19569",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "8da6903e33634a052d881ce851d3545bc1a14232",
      "in_reply_to_id": null,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "To be honest I don't think of 19569 as part of the implementation; orphan fetching from wtxid-relay peers is not mandated by the spec, it's purely an optimization that takes advantage of allowances in the BIP.  The BIP is drafted to allow for design decisions like that, and I don't think that it would make sense to add PRs here every time we do something that operates under one of those allowances.\r\n\r\nFor example, if we changed the behavior of Bitcoin Core to get rid of mapRelay and only return transactions from our mempool, and we didn't want to look up transactions in our mempool twice (once by txid, once by wtxid), then a peer that sent us a MSG_TX getdata for something that is a wtxid would then no longer be able to fetch transactions from us successfully.  While the BIP allows Bitcoin Core to operate in this way (at least, in my proposed language! maybe others disagree), I think a change like that wouldn't constitute a part of the implementation of this BIP that would make sense to include here.\r\n\r\nI don't feel strongly enough to object to including 19569 if most reviewers (particularly @sipa) think it belongs here, this is just my gut reaction based on how I understand the design docs.",
      "created_at": "2020-08-03T16:53:13Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464537095",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464537095"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 55,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464548971",
      "pull_request_review_id": 460199734,
      "id": 464548971,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU0ODk3MQ==",
      "diff_hunk": "@@ -41,7 +41,7 @@ announcing and fetching transactions.\n \n # A new WTXIDRELAY message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The WTXIDRELAY message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n+# The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "c15fa540a20d96bf838ec3ec8cd93931e04c9c65",
      "in_reply_to_id": 464518209,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is there a reason to require all >= 70016 peers to send a WTXIDRELAY msg even if they do not need or want it?",
      "created_at": "2020-08-03T17:15:35Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464548971",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464548971"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464550108",
      "pull_request_review_id": 460201113,
      "id": 464550108,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU1MDEwOA==",
      "diff_hunk": "@@ -41,7 +41,7 @@ announcing and fetching transactions.\n \n # A new WTXIDRELAY message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The WTXIDRELAY message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n+# The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "c15fa540a20d96bf838ec3ec8cd93931e04c9c65",
      "in_reply_to_id": 464518209,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Of course not.  Implementing this BIP is not a requirement for anyone!",
      "created_at": "2020-08-03T17:17:42Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464550108",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464550108"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464569661",
      "pull_request_review_id": 460225685,
      "id": 464569661,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU2OTY2MQ==",
      "diff_hunk": "@@ -41,7 +41,7 @@ announcing and fetching transactions.\n \n # A new WTXIDRELAY message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The WTXIDRELAY message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n+# The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "c15fa540a20d96bf838ec3ec8cd93931e04c9c65",
      "in_reply_to_id": 464518209,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That's why it's a may rather than a must. The peer may opt in to wtxid relay by sending the wtxidrelay message.",
      "created_at": "2020-08-03T17:50:00Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464569661",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464569661"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464575081",
      "pull_request_review_id": 460232403,
      "id": 464575081,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU3NTA4MQ==",
      "diff_hunk": "@@ -41,7 +41,7 @@ announcing and fetching transactions.\n \n # A new WTXIDRELAY message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The WTXIDRELAY message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n+# The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "c15fa540a20d96bf838ec3ec8cd93931e04c9c65",
      "in_reply_to_id": 464518209,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@sdaftuar @jnewbery I think perhaps you're interpreting the language differently. Here is my guess:\r\n\r\nSuhas means \"To advertize itself as having implemented this BIP, a peer must send wtxidrelay\", and that a \"may\" here would mean that someone can implement BIP339 without sending it.\r\n\r\nJohn is interpreting the \"must\" as unconditional, and wants to emphasize that it is allowed for someone to not opt into BIP339.\r\n\r\n",
      "created_at": "2020-08-03T18:00:40Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464575081",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464575081"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464579279",
      "pull_request_review_id": 460237730,
      "id": 464579279,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU3OTI3OQ==",
      "diff_hunk": "@@ -43,7 +43,8 @@ announcing and fetching transactions.\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n # The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.\n # A new inv type MSG_WTX (0x00000005) is added, for use in both INV messages and GETDATA requests, indicating that the hash being referenced is a transaction's wtxid. In the case of GETDATA requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a WTXIDRELAY message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# After a node has received a WTXIDRELAY message from a peer, the node SHOULD use the MSG_WTX inv-type when announcing transactions to that peer.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "f543c41e29b472eb4c436873921c07005914e140",
      "in_reply_to_id": 464519119,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Why the relaxation to SHOULD here?\r\n\r\nSorry, you're right. This should stay as MUST instead of SHOULD.\r\n\r\n> Also, why delete the requirement to request announced transactions from that peer using MSG_WTX getdata messages?\r\n\r\nI think with your improved sentence below, this isn't needed here (and actually makes things less clear). I also think it's better to document the announce behaviour and the request behaviour in different bullet points.",
      "created_at": "2020-08-03T18:09:04Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464579279",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464579279"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464579438",
      "pull_request_review_id": 460237903,
      "id": 464579438,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU3OTQzOA==",
      "diff_hunk": "@@ -43,7 +43,8 @@ announcing and fetching transactions.\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n # The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.\n # A new inv type MSG_WTX (0x00000005) is added, for use in both INV messages and GETDATA requests, indicating that the hash being referenced is a transaction's wtxid. In the case of GETDATA requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a WTXIDRELAY message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# After a node has received a WTXIDRELAY message from a peer, the node SHOULD use the MSG_WTX inv-type when announcing transactions to that peer.\n+# After receiving an INV message containing a MSG_WTX object, a node MAY request the announced transactions from that peer using MSG_WTX GETDATA message. A node MAY still request transactions from that peer using MSG_TX GETDATA messages, for example to fetch the parents of orphan transactions.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 6,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "f543c41e29b472eb4c436873921c07005914e140",
      "in_reply_to_id": 464530563,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Agree. I'll take your sentence.",
      "created_at": "2020-08-03T18:09:22Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464579438",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464579438"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 47,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464580328",
      "pull_request_review_id": 460239024,
      "id": 464580328,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU4MDMyOA==",
      "diff_hunk": "@@ -52,7 +52,7 @@ As wtxid-based transaction relay is only enabled between peers that both support\n \n ==Implementation==\n \n-https://github.com/bitcoin/bitcoin/pull/18044\n+https://github.com/bitcoin/bitcoin/pull/18044 and https://github.com/bitcoin/bitcoin/pull/19569",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "8da6903e33634a052d881ce851d3545bc1a14232",
      "in_reply_to_id": 464537095,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah, I was on the fence about this. I wanted to include 19569 to demonstrate that requesting transactions by txid is legal even after negotiating wtxid relay. But as you say, it's not strictly part of the implementation of the spec, but rather an optimization that is permitted under the allowances of the spec. I'll remove it.",
      "created_at": "2020-08-03T18:11:10Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464580328",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464580328"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 55,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464586367",
      "pull_request_review_id": 460246566,
      "id": 464586367,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU4NjM2Nw==",
      "diff_hunk": "@@ -41,7 +41,7 @@ announcing and fetching transactions.\n \n # A new WTXIDRELAY message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The WTXIDRELAY message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n+# The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "c15fa540a20d96bf838ec3ec8cd93931e04c9c65",
      "in_reply_to_id": 464518209,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@jnewbery I think you're confusing compatibility with implementation.\r\n\r\nWhether software that doesn't implement this BIP remains compatible with software that does is a separate issue from defining what implementation of this BIP means.\r\n\r\nI think the most useful way to define what it means to implement this BIP is to require that implementing software actually exchange wtxids when announcing and fetching transactions.  The alternative is absurd: why bother specifying an implementation when all software on the network was already compliant before we did anything?\r\n\r\nI think the concern would be if it weren't clear that software could choose to not implement the BIP and still remain compatible.  But that's why there's a backwards compatibility section...  If the text there is not enough, I'd prefer we add additional text to make it clear that implementing this BIP is not inherently incompatible with txid-based relay.",
      "created_at": "2020-08-03T18:23:20Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464586367",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464586367"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464624425",
      "pull_request_review_id": 460293583,
      "id": 464624425,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYyNDQyNQ==",
      "diff_hunk": "@@ -41,7 +41,7 @@ announcing and fetching transactions.\n \n # A new WTXIDRELAY message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The WTXIDRELAY message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n+# The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "c15fa540a20d96bf838ec3ec8cd93931e04c9c65",
      "in_reply_to_id": 464518209,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't think I'm confused. As @sipa points out, we're simply interpreting the language differently.\r\n\r\nThe sentence \"The WTXIDRELAY message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016\" implies strongly to me that if a peer sends us a protocol version >= 70016, then we *must* opt in to wtxid relay. That's fine for now, when 70016 is the highest p2p version (and you can therefore opt out by using version 70015), but if there's a later version then it's restrictive - an implementation may want to opt in to whatever feature is introduced by 70017, but not opt in to wtxid relay.\r\n\r\nPerhaps we can reword it in a way that avoids any ambiguity:\r\n\r\n> If a node wishes to opt in to wtxid relay with a peer whose version is >= 70016, it MUST send a WTXIDRELAY message after receiving the VERSION message and before sending the VERACK message. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.",
      "created_at": "2020-08-03T19:43:47Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464624425",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464624425"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464630308",
      "pull_request_review_id": 460301006,
      "id": 464630308,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYzMDMwOA==",
      "diff_hunk": "@@ -41,7 +41,7 @@ announcing and fetching transactions.\n \n # A new WTXIDRELAY message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The WTXIDRELAY message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n+# The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "c15fa540a20d96bf838ec3ec8cd93931e04c9c65",
      "in_reply_to_id": 464518209,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@jnewbery Thinking more about it, I think I agree with Suhas that his interpretation makes more sense. Every BIP supports not being implemented by some software, as after all, everything is opt-in. If a BIP poses issues with other software that doesn't implement it, that's something to go in a compatibility section.\r\n\r\nSo I don't agree that the BIP (as is) should be interpreted as version 70017, in any future version, implying that WTXIDRELAY must be sent. It is only true for software that chooses to implement BIP339, and anything is free not to do that.\r\n\r\nIf we want to make that more clear, the sentence could be prefixed with \"To implement this BIP, ...\" - making it clear that that is the choice. Just saying \"wishes to opt in to\" may still be ambiguous, because then the question may arise: what does it mean to implement the BIP, but not opt in?",
      "created_at": "2020-08-03T19:57:07Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464630308",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464630308"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464637832",
      "pull_request_review_id": 460310703,
      "id": 464637832,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYzNzgzMg==",
      "diff_hunk": "@@ -41,7 +41,7 @@ announcing and fetching transactions.\n \n # A new WTXIDRELAY message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The WTXIDRELAY message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n+# The WTXIDRELAY message may be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK. A WTXIDRELAY message received after a VERACK message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 5,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "c15fa540a20d96bf838ec3ec8cd93931e04c9c65",
      "in_reply_to_id": 464518209,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ok, reverted to MUST",
      "created_at": "2020-08-03T20:13:47Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464637832",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464637832"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464981894",
      "pull_request_review_id": 460725223,
      "id": 464981894,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk4MTg5NA==",
      "diff_hunk": "@@ -41,9 +41,10 @@ announcing and fetching transactions.\n \n # A new wtxidrelay message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The wtxidrelay message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n-# A new inv type MSG_WTX (0x00000005) is added, for use in both INV messages and GETDATA requests, indicating that the hash being referenced is a transaction's wtxid. In the case of GETDATA requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a \"wtxidrelay\" message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# The wtxidrelay message MUST be sent in response to a version message from a peer whose protocol version is >= 70016, and prior to sending a verack. A wtxidrelay message received after a verack message MUST be ignored or treated as invalid.\n+# A new inv type MSG_WTX (0x00000005) is added, for use in both inv messages and getdata requests, indicating that the hash being referenced is a transaction's wtxid. In the case of getdata requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n+# After a node has received a wtxidrelay message from a peer, the node MUST use the MSG_WTX inv-type when announcing transactions to that peer.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 18,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "2f9649fcd9ddd6800a12d6d9ea4fe1a5fea24b61",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "s/inv-type/inv type/ (\"inv type\" is also used in line 45 immediately above)",
      "created_at": "2020-08-04T11:27:15Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464981894",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464981894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464982551",
      "pull_request_review_id": 460725223,
      "id": 464982551,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk4MjU1MQ==",
      "diff_hunk": "@@ -41,9 +41,10 @@ announcing and fetching transactions.\n \n # A new wtxidrelay message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The wtxidrelay message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n-# A new inv type MSG_WTX (0x00000005) is added, for use in both INV messages and GETDATA requests, indicating that the hash being referenced is a transaction's wtxid. In the case of GETDATA requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a \"wtxidrelay\" message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# The wtxidrelay message MUST be sent in response to a version message from a peer whose protocol version is >= 70016, and prior to sending a verack. A wtxidrelay message received after a verack message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 16,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "2f9649fcd9ddd6800a12d6d9ea4fe1a5fea24b61",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "s/, and/ and/",
      "created_at": "2020-08-04T11:28:33Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464982551",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464982551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464988038",
      "pull_request_review_id": 460725223,
      "id": 464988038,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk4ODAzOA==",
      "diff_hunk": "@@ -41,9 +41,10 @@ announcing and fetching transactions.\n \n # A new wtxidrelay message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".",
      "path": "bip-0339.mediawiki",
      "position": 11,
      "original_position": 11,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "2f9649fcd9ddd6800a12d6d9ea4fe1a5fea24b61",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "perhaps \"A new wtxidrelay net message type is added\"",
      "created_at": "2020-08-04T11:39:54Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r464988038",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/464988038"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 42,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/465058055",
      "pull_request_review_id": 460822867,
      "id": 465058055,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA1ODA1NQ==",
      "diff_hunk": "@@ -41,9 +41,10 @@ announcing and fetching transactions.\n \n # A new wtxidrelay message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The wtxidrelay message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n-# A new inv type MSG_WTX (0x00000005) is added, for use in both INV messages and GETDATA requests, indicating that the hash being referenced is a transaction's wtxid. In the case of GETDATA requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a \"wtxidrelay\" message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# The wtxidrelay message MUST be sent in response to a version message from a peer whose protocol version is >= 70016, and prior to sending a verack. A wtxidrelay message received after a verack message MUST be ignored or treated as invalid.\n+# A new inv type MSG_WTX (0x00000005) is added, for use in both inv messages and getdata requests, indicating that the hash being referenced is a transaction's wtxid. In the case of getdata requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n+# After a node has received a wtxidrelay message from a peer, the node MUST use the MSG_WTX inv-type when announcing transactions to that peer.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 18,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "2f9649fcd9ddd6800a12d6d9ea4fe1a5fea24b61",
      "in_reply_to_id": 464981894,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good idea. Standardized to 'inv type'",
      "created_at": "2020-08-04T13:41:25Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r465058055",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/465058055"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/465058550",
      "pull_request_review_id": 460823456,
      "id": 465058550,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA1ODU1MA==",
      "diff_hunk": "@@ -41,9 +41,10 @@ announcing and fetching transactions.\n \n # A new wtxidrelay message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n-# The wtxidrelay message must be sent in response to a VERSION message from a peer whose protocol version is >= 70016, and prior to sending a VERACK.\n-# A new inv type MSG_WTX (0x00000005) is added, for use in both INV messages and GETDATA requests, indicating that the hash being referenced is a transaction's wtxid. In the case of GETDATA requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a \"wtxidrelay\" message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# The wtxidrelay message MUST be sent in response to a version message from a peer whose protocol version is >= 70016, and prior to sending a verack. A wtxidrelay message received after a verack message MUST be ignored or treated as invalid.",
      "path": "bip-0339.mediawiki",
      "position": null,
      "original_position": 16,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "2f9649fcd9ddd6800a12d6d9ea4fe1a5fea24b61",
      "in_reply_to_id": 464982551,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2020-08-04T13:42:14Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r465058550",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/465058550"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/465059263",
      "pull_request_review_id": 460824329,
      "id": 465059263,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA1OTI2Mw==",
      "diff_hunk": "@@ -41,9 +41,10 @@ announcing and fetching transactions.\n \n # A new wtxidrelay message is added, which is defined as an empty message where pchCommand == \"wtxidrelay\".",
      "path": "bip-0339.mediawiki",
      "position": 11,
      "original_position": 11,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "2f9649fcd9ddd6800a12d6d9ea4fe1a5fea24b61",
      "in_reply_to_id": 464988038,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm going to leave this. My main motivation here was to update the BIP to be in line with the implementation for the wtxidrelay handshake and transaction fetching. It feels like scope creep to touch other parts of the document.",
      "created_at": "2020-08-04T13:43:20Z",
      "updated_at": "2020-08-04T13:43:36Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r465059263",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/465059263"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 42,
      "original_line": 42,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/465182100",
      "pull_request_review_id": 460983161,
      "id": 465182100,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTE4MjEwMA==",
      "diff_hunk": "@@ -43,7 +43,8 @@ announcing and fetching transactions.\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n # The wtxidrelay message MUST be sent in response to a version message from a peer whose protocol version is >= 70016 and prior to sending a verack. A wtxidrelay message received after a verack message MUST be ignored or treated as invalid.\n # A new inv type MSG_WTX (0x00000005) is added, for use in both inv messages and getdata requests, indicating that the hash being referenced is a transaction's wtxid. In the case of getdata requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a wtxidrelay message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# After a node has received a wtxidrelay message from a peer, the node MUST use the MSG_WTX inv type when announcing transactions to that peer.\n+# After receiving an inv message containing a MSG_WTX object, a node SHOULD use a MSG_WTX getdata message to request any announced transactions. A node MAY still request transactions from that peer using MSG_TX getdata messages, such as for transactions not recently announced by that peer (like the parents of recently announced transactions).",
      "path": "bip-0339.mediawiki",
      "position": 19,
      "original_position": 6,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "in_reply_to_id": null,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "On further thought -- would this last bullet be clearer if we wrote it like this:\r\n\r\n> After a node has received a wtxidrelay message from a peer, a node SHOULD use a MSG_WTX getdata message to request any announced transactions from that peer.  A node MAY still request transactions from that peer using MSG_TX getdata messages, such as for transactions not recently announced by that peer (like the parents of recently announced transactions).\r\n\r\nThe way it's written here, it seems like if any peer sends us a MSG_WTX inv, that we should (a) respond with a MSG_WTX getdata (even if the peer hasn't negotiated wtxidrelay with us!) and (b) it's okay if we respond with a MSG_TX getdata (which is basically wrong, we're just trying to carve out reasons you might send one over the wire, we don't expect it to occur for a hash that appears as a MSG_WTX inv).\r\n\r\nAnd should we add a new bullet saying that we (may? must?) ignore wtxidrelay messages unless the peer's version is >= 70016?",
      "created_at": "2020-08-04T16:36:15Z",
      "updated_at": "2020-08-04T16:36:16Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r465182100",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/465182100"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 47,
      "original_line": 47,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/466645369",
      "pull_request_review_id": 462824063,
      "id": 466645369,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY0NTM2OQ==",
      "diff_hunk": "@@ -43,7 +43,8 @@ announcing and fetching transactions.\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n # The wtxidrelay message MUST be sent in response to a version message from a peer whose protocol version is >= 70016 and prior to sending a verack. A wtxidrelay message received after a verack message MUST be ignored or treated as invalid.\n # A new inv type MSG_WTX (0x00000005) is added, for use in both inv messages and getdata requests, indicating that the hash being referenced is a transaction's wtxid. In the case of getdata requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a wtxidrelay message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# After a node has received a wtxidrelay message from a peer, the node MUST use the MSG_WTX inv type when announcing transactions to that peer.\n+# After receiving an inv message containing a MSG_WTX object, a node SHOULD use a MSG_WTX getdata message to request any announced transactions. A node MAY still request transactions from that peer using MSG_TX getdata messages, such as for transactions not recently announced by that peer (like the parents of recently announced transactions).",
      "path": "bip-0339.mediawiki",
      "position": 19,
      "original_position": 6,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "in_reply_to_id": 465182100,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you can keep the SHOULD as a MUST as you underscore well enough  a INV(MSG_WTX) announcement must be paired with a GETDATA(MSG_WTX). But also fine with your current alternative, which sounds clearer IMO.\r\n\r\nYes, good to check peer's version and must ignore them, some bitcoin libraries are currently forgetting to export p2p versions to let upstream software announce p2p extensions they want to speak (like rust-bitcoin).",
      "created_at": "2020-08-06T19:43:37Z",
      "updated_at": "2020-08-06T19:43:37Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r466645369",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/466645369"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 47,
      "original_line": 47,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/467246305",
      "pull_request_review_id": 463582402,
      "id": 467246305,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzI0NjMwNQ==",
      "diff_hunk": "@@ -43,7 +43,8 @@ announcing and fetching transactions.\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n # The wtxidrelay message MUST be sent in response to a version message from a peer whose protocol version is >= 70016 and prior to sending a verack. A wtxidrelay message received after a verack message MUST be ignored or treated as invalid.\n # A new inv type MSG_WTX (0x00000005) is added, for use in both inv messages and getdata requests, indicating that the hash being referenced is a transaction's wtxid. In the case of getdata requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a wtxidrelay message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# After a node has received a wtxidrelay message from a peer, the node MUST use the MSG_WTX inv type when announcing transactions to that peer.\n+# After receiving an inv message containing a MSG_WTX object, a node SHOULD use a MSG_WTX getdata message to request any announced transactions. A node MAY still request transactions from that peer using MSG_TX getdata messages, such as for transactions not recently announced by that peer (like the parents of recently announced transactions).",
      "path": "bip-0339.mediawiki",
      "position": 19,
      "original_position": 6,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "in_reply_to_id": 465182100,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "My understanding of this BIP (and I think the most reasonable reading of it) is that sending a peer a wtxidrelay message to a peer means \"please send inventory to me using MSG_WTX objects in the INV message\". I don't think it should also mean \"you must request transactions using MSG_WTX objects in the GETDATA message\". That would implicitly mean that wtxidrelay must be enabled in both directions (because for you to request MSG_WTX objects, I must be announcing MSG_WTX objects). If that's the intention, then I think the BIP needs to explicitly say that, and also specify what happens if one side sends a wtxidrelay but the other side doesn't.\r\n\r\nI think the protocol is simpler if it's enabled separately in both directions and wtxidrelay simply means \"send me MSG_WTX INVs\".",
      "created_at": "2020-08-07T20:08:55Z",
      "updated_at": "2020-08-07T20:08:55Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r467246305",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/467246305"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 47,
      "original_line": 47,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/467328864",
      "pull_request_review_id": 463689964,
      "id": 467328864,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzMyODg2NA==",
      "diff_hunk": "@@ -43,7 +43,8 @@ announcing and fetching transactions.\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n # The wtxidrelay message MUST be sent in response to a version message from a peer whose protocol version is >= 70016 and prior to sending a verack. A wtxidrelay message received after a verack message MUST be ignored or treated as invalid.\n # A new inv type MSG_WTX (0x00000005) is added, for use in both inv messages and getdata requests, indicating that the hash being referenced is a transaction's wtxid. In the case of getdata requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a wtxidrelay message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# After a node has received a wtxidrelay message from a peer, the node MUST use the MSG_WTX inv type when announcing transactions to that peer.\n+# After receiving an inv message containing a MSG_WTX object, a node SHOULD use a MSG_WTX getdata message to request any announced transactions. A node MAY still request transactions from that peer using MSG_TX getdata messages, such as for transactions not recently announced by that peer (like the parents of recently announced transactions).",
      "path": "bip-0339.mediawiki",
      "position": 19,
      "original_position": 6,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "in_reply_to_id": 465182100,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> My understanding of this BIP (and I think the most reasonable reading of it) is that sending a peer a wtxidrelay message to a peer means \"please send inventory to me using MSG_WTX objects in the INV message\". \r\n\r\nThis is a misunderstanding of the BIP and the implementation.  Note that the original BIP text was (essentially) correct here -- the intention is that wtxidrelay is either on in both directions on a link, or off in both directions.  This is also how the implementation works: \r\n * for peers with a version >= 70016, we always send a wtxidrelay message, but we only enable it on a link if we also receive it\r\n * peers that haven't sent us a wtxidrelay message (or whose version is too low) will have any MSG_WTX inv's ignored (not a requirement of the BIP, but certainly permitted under the BIP)\r\n * if a peer has sent us a wtxidrelay message, they MUST announce transactions to us using MSG_WTX invs, so it would not make any sense for us to respond with MSG_TX getdata messages.  There's no reason to think that requesting a hash and calling it a txid instead of a wtxid would allow our peer to successfully look it up.\r\n\r\nThe reason I'm ok with changing the MUST to a SHOULD here, regarding the getdata messages, is because sometimes you could imagine that a peer will announce a transaction via MSG_WTX, we'll hold off on fetching it for a while, and then orphan fetching will kick in and cause us to request that parent via txid -- which might be the same as the MSG_WTX wtxid (if it's a non-segwit transaction).  So in that case, the traffic on the link might look like MSG_WTX inv followed by MSG_TX getdata.  But that is a rare case, and we call it out explicitly in the new language, so the understanding should be that it's generally nonsensical to respond to a MSG_WTX inv with a MSG_TX getdata.\r\n\r\nIf you have more questions about the language, it's probably easiest to take it offline -- I'm happy to update the text with language that clarifies any confusion (and that seems easier than trying to hash it out here).",
      "created_at": "2020-08-07T23:41:08Z",
      "updated_at": "2020-08-07T23:41:57Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r467328864",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/467328864"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 47,
      "original_line": 47,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/467483687",
      "pull_request_review_id": 463814646,
      "id": 467483687,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzQ4MzY4Nw==",
      "diff_hunk": "@@ -43,7 +43,8 @@ announcing and fetching transactions.\n # The protocol version of nodes implementing this BIP must be set to 70016 or higher.\n # The wtxidrelay message MUST be sent in response to a version message from a peer whose protocol version is >= 70016 and prior to sending a verack. A wtxidrelay message received after a verack message MUST be ignored or treated as invalid.\n # A new inv type MSG_WTX (0x00000005) is added, for use in both inv messages and getdata requests, indicating that the hash being referenced is a transaction's wtxid. In the case of getdata requests, MSG_WTX implies that the transaction being requested should be serialized with witness as well, as described in BIP 144.\n-# After a node has sent and received a wtxidrelay message to/from a given peer, the node is required to use the MSG_WTX inv-type when announcing transactions to that peer, or requesting announced transactions from that peer.\n+# After a node has received a wtxidrelay message from a peer, the node MUST use the MSG_WTX inv type when announcing transactions to that peer.\n+# After receiving an inv message containing a MSG_WTX object, a node SHOULD use a MSG_WTX getdata message to request any announced transactions. A node MAY still request transactions from that peer using MSG_TX getdata messages, such as for transactions not recently announced by that peer (like the parents of recently announced transactions).",
      "path": "bip-0339.mediawiki",
      "position": 19,
      "original_position": 6,
      "commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "original_commit_id": "1eee1b1fae29b9e3e6a95bdc60fe10db6d667e6a",
      "in_reply_to_id": 465182100,
      "user": {
        "login": "jnewbery",
        "id": 1063656,
        "node_id": "MDQ6VXNlcjEwNjM2NTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jnewbery",
        "html_url": "https://github.com/jnewbery",
        "followers_url": "https://api.github.com/users/jnewbery/followers",
        "following_url": "https://api.github.com/users/jnewbery/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jnewbery/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jnewbery/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
        "organizations_url": "https://api.github.com/users/jnewbery/orgs",
        "repos_url": "https://api.github.com/users/jnewbery/repos",
        "events_url": "https://api.github.com/users/jnewbery/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jnewbery/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ok",
      "created_at": "2020-08-08T16:57:05Z",
      "updated_at": "2020-08-08T16:57:05Z",
      "html_url": "https://github.com/bitcoin/bips/pull/961#discussion_r467483687",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/467483687"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/961"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 47,
      "original_line": 47,
      "side": "RIGHT"
    }
  ]
}