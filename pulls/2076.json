{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bips/pulls/2076",
    "id": 3152395267,
    "node_id": "PR_kwDOAN28mc675bwD",
    "html_url": "https://github.com/bitcoin/bips/pull/2076",
    "diff_url": "https://github.com/bitcoin/bips/pull/2076.diff",
    "patch_url": "https://github.com/bitcoin/bips/pull/2076.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bips/issues/2076",
    "commits_url": "https://api.github.com/repos/bitcoin/bips/pulls/2076/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bips/pulls/2076/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bips/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bips/issues/2076/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bips/statuses/9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
    "number": 2076,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "BIP Draft: Peer Feature Negotiation",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Abstract:\r\n\r\nThis BIP defines a peer-to-peer message that can be used for announcements and negotiation related to support of new peer-to-peer features.\r\n\r\nMailing list post: https://gnusha.org/pi/bitcoindev/aUUXLgEUCgGb122o@erisian.com.au/T/#u\r\n",
    "labels": [
      {
        "id": 275845989,
        "node_id": "MDU6TGFiZWwyNzU4NDU5ODk=",
        "url": "https://api.github.com/repos/bitcoin/bips/labels/New%20BIP",
        "name": "New BIP",
        "color": "5319e7",
        "default": false
      },
      {
        "id": 276738669,
        "node_id": "MDU6TGFiZWwyNzY3Mzg2Njk=",
        "url": "https://api.github.com/repos/bitcoin/bips/labels/Needs%20number%20assignment",
        "name": "Needs number assignment",
        "color": "eb6420",
        "default": false
      }
    ],
    "created_at": "2026-01-07T12:25:45Z",
    "updated_at": "2026-01-11T01:17:00Z",
    "mergeable": true,
    "mergeable_state": "clean",
    "merged": false,
    "merge_commit_sha": "e4c75ec781b7974b7be12405332acdc717bdae81",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ajtowns:202512-p2p-feature",
      "ref": "202512-p2p-feature",
      "sha": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 158782389,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNTg3ODIzODk=",
        "name": "bips",
        "full_name": "ajtowns/bips",
        "owner": {
          "login": "ajtowns",
          "id": 127186,
          "node_id": "MDQ6VXNlcjEyNzE4Ng==",
          "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ajtowns",
          "html_url": "https://github.com/ajtowns",
          "followers_url": "https://api.github.com/users/ajtowns/followers",
          "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
          "organizations_url": "https://api.github.com/users/ajtowns/orgs",
          "repos_url": "https://api.github.com/users/ajtowns/repos",
          "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ajtowns/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ajtowns/bips",
        "description": "Bitcoin Improvement Proposals",
        "fork": true,
        "url": "https://api.github.com/repos/ajtowns/bips",
        "archive_url": "https://api.github.com/repos/ajtowns/bips/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ajtowns/bips/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ajtowns/bips/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ajtowns/bips/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ajtowns/bips/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ajtowns/bips/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ajtowns/bips/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ajtowns/bips/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ajtowns/bips/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ajtowns/bips/contributors",
        "deployments_url": "https://api.github.com/repos/ajtowns/bips/deployments",
        "downloads_url": "https://api.github.com/repos/ajtowns/bips/downloads",
        "events_url": "https://api.github.com/repos/ajtowns/bips/events",
        "forks_url": "https://api.github.com/repos/ajtowns/bips/forks",
        "git_commits_url": "https://api.github.com/repos/ajtowns/bips/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ajtowns/bips/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ajtowns/bips/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ajtowns/bips.git",
        "issue_comment_url": "https://api.github.com/repos/ajtowns/bips/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ajtowns/bips/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ajtowns/bips/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ajtowns/bips/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ajtowns/bips/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ajtowns/bips/languages",
        "merges_url": "https://api.github.com/repos/ajtowns/bips/merges",
        "milestones_url": "https://api.github.com/repos/ajtowns/bips/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ajtowns/bips/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ajtowns/bips/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ajtowns/bips/releases%7B/id%7D",
        "ssh_url": "git@github.com:ajtowns/bips.git",
        "stargazers_url": "https://api.github.com/repos/ajtowns/bips/stargazers",
        "statuses_url": "https://api.github.com/repos/ajtowns/bips/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ajtowns/bips/subscribers",
        "subscription_url": "https://api.github.com/repos/ajtowns/bips/subscription",
        "tags_url": "https://api.github.com/repos/ajtowns/bips/tags",
        "teams_url": "https://api.github.com/repos/ajtowns/bips/teams",
        "trees_url": "https://api.github.com/repos/ajtowns/bips/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ajtowns/bips.git",
        "hooks_url": "https://api.github.com/repos/ajtowns/bips/hooks",
        "svn_url": "https://github.com/ajtowns/bips",
        "homepage": "bitcoin.org",
        "language": "Wikitext",
        "forks_count": 3,
        "stargazers_count": 3,
        "watchers_count": 3,
        "size": 19799,
        "default_branch": "master",
        "open_issues_count": 3,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-07T12:23:41Z",
        "created_at": "2018-11-23T04:53:50Z",
        "updated_at": "2025-08-11T23:37:08Z",
        "allow_forking": true
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "e2f9fe0c04123553644a9641bc861f6092c9763a",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 14531737,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDUzMTczNw==",
        "name": "bips",
        "full_name": "bitcoin/bips",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bips",
        "description": "Bitcoin Improvement Proposals",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bips",
        "archive_url": "https://api.github.com/repos/bitcoin/bips/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bips/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bips/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bips/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bips/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bips/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bips/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bips/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bips/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bips/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bips/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bips/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bips/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bips/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bips/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bips/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bips/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bips.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bips/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bips/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bips/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bips/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bips/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bips/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bips/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bips/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bips/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bips/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bips/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bips.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bips/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bips/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bips/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bips/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bips/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bips/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bips/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bips.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bips/hooks",
        "svn_url": "https://github.com/bitcoin/bips",
        "homepage": "",
        "language": "Wikitext",
        "forks_count": 5864,
        "stargazers_count": 10484,
        "watchers_count": 10484,
        "size": 18532,
        "default_branch": "master",
        "open_issues_count": 74,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": false,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2026-01-09T03:18:06Z",
        "created_at": "2013-11-19T17:18:41Z",
        "updated_at": "2026-01-10T21:06:39Z",
        "allow_forking": true
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bips/pulls/2076"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 314,
    "deletions": 0,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 4,
    "comments": 0
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAN28mdoAKDk2OTdiMmJlMjUxYjFhODBmM2VkMTBkNWFhZTVlZGEwNzBmYjNhMGI",
      "url": "https://api.github.com/repos/bitcoin/bips/git/commits/9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bips/commit/9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "tree": {
        "sha": "4897136edbe64d1a6e39dd75aa0458ab21cf58da",
        "url": "https://api.github.com/repos/bitcoin/bips/git/trees/4897136edbe64d1a6e39dd75aa0458ab21cf58da"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bips/git/commits/e2f9fe0c04123553644a9641bc861f6092c9763a",
          "sha": "e2f9fe0c04123553644a9641bc861f6092c9763a",
          "html_url": "https://github.com/bitcoin/bips/commit/e2f9fe0c04123553644a9641bc861f6092c9763a"
        }
      ],
      "message": "BIP???: p2p feature negotiation",
      "committer": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2026-01-07T12:23:20Z"
      },
      "author": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2025-12-05T21:27:13Z"
      },
      "sha": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b"
    },
    {
      "event": "renamed",
      "id": 21932678165,
      "node_id": "RTE_lADOAN28mc7h0MHIzwAAAAUbShwV",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/21932678165",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T20:58:15Z",
      "rename": {
        "from": "BIP???: Peer feature negotiation",
        "to": "BIP Draft: Peer Feature Negotiation"
      }
    },
    {
      "event": "labeled",
      "id": 21932682405,
      "node_id": "LE_lADOAN28mc7h0MHIzwAAAAUbSiyl",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/21932682405",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T20:58:29Z",
      "label": {
        "name": "New BIP",
        "color": "5319e7"
      }
    },
    {
      "event": "reviewed",
      "id": 3641298301,
      "node_id": "PRR_kwDOAN28mc7ZCc19",
      "url": null,
      "actor": null,
      "commit_id": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2026-01-08T21:18:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for your submission. This proposal appears already complete from an editorial perspective, and I have hardly any other comments. It would be great to see some P2P experts weigh in, but otherwise, this seems fairly mature.",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bips/pull/2076#pullrequestreview-3641298301",
      "submitted_at": "2026-01-08T21:18:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bips/pulls/2076"
    },
    {
      "event": "labeled",
      "id": 21933108409,
      "node_id": "LE_lADOAN28mc7h0MHIzwAAAAUbUKy5",
      "url": "https://api.github.com/repos/bitcoin/bips/issues/events/21933108409",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2026-01-08T21:19:05Z",
      "label": {
        "name": "Needs number assignment",
        "color": "eb6420"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/2673890166",
      "pull_request_review_id": 3641298301,
      "id": 2673890166,
      "node_id": "PRRC_kwDOAN28mc6fYFN2",
      "diff_hunk": "@@ -0,0 +1,314 @@\n+```\n+  BIP: ?\n+  Layer: Peer Services\n+  Title: Peer Feature Negotiation\n+  Author: Anthony Towns <aj@erisian.com.au>\n+  Comments-Summary: No comments yet.\n+  Comments-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-XXXX\n+  Status: Draft\n+  Type: Standards Track\n+  Created: 2025-12-06\n+  License: BSD-3-Clause\n+  Post-History: https://gnusha.org/pi/bitcoindev/aUUXLgEUCgGb122o@erisian.com.au/T/#u\n+                https://gnusha.org/pi/bitcoindev/20200821023647.7eat4goqqrtaqnna@erisian.com.au/\n+```\n+\n+## Abstract\n+\n+This BIP defines a peer-to-peer message that can be used for announcements\n+and negotiation related to support of new peer-to-peer features.",
      "path": "bip-peer-feature-negotiation.md",
      "position": 19,
      "original_position": 19,
      "commit_id": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "original_commit_id": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "```suggestion\r\nand negotiation related to support of new or optional peer-to-peer features.\r\n```",
      "created_at": "2026-01-08T21:02:06Z",
      "updated_at": "2026-01-08T21:18:58Z",
      "html_url": "https://github.com/bitcoin/bips/pull/2076#discussion_r2673890166",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/2673890166"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/2076"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 19,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/2673936287",
      "pull_request_review_id": 3641298301,
      "id": 2673936287,
      "node_id": "PRRC_kwDOAN28mc6fYQef",
      "diff_hunk": "@@ -0,0 +1,314 @@\n+```\n+  BIP: ?\n+  Layer: Peer Services\n+  Title: Peer Feature Negotiation\n+  Author: Anthony Towns <aj@erisian.com.au>\n+  Comments-Summary: No comments yet.\n+  Comments-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-XXXX\n+  Status: Draft\n+  Type: Standards Track\n+  Created: 2025-12-06\n+  License: BSD-3-Clause\n+  Post-History: https://gnusha.org/pi/bitcoindev/aUUXLgEUCgGb122o@erisian.com.au/T/#u\n+                https://gnusha.org/pi/bitcoindev/20200821023647.7eat4goqqrtaqnna@erisian.com.au/\n+```\n+\n+## Abstract\n+\n+This BIP defines a peer-to-peer message that can be used for announcements\n+and negotiation related to support of new peer-to-peer features.\n+\n+## Motivation\n+\n+Historically, new peer-to-peer protocol changes have been tied to\n+bumping the protocol version, so that peers know to only attempt feature\n+negotiation with other peers that may have been upgraded to support the\n+feature. Coordinating the protocol version across implementations, when\n+different clients may have different priorities for features to implement,\n+is an unnecessary burden in the upgrade process for P2P features that do\n+not require universal support. And at a more philosophical level, having\n+the P2P protocol be [permissionlessly extensible][permless-extensible],\n+with no coordination required between implementations or developers\n+seems ideal for a decentralized system.\n+\n+Many earlier P2P protocol upgrades were implemented as new messages\n+sent after a peer connection is setup (ie, after receipt of a `verack`\n+message by both sides). See [BIP 130 (sendheaders)][BIP130], [BIP 133\n+(feefilter)][BIP133], [BIP 152 (compact blocks)][BIP152] for some\n+examples. However, for some P2P upgrades, it is helpful to perform\n+feature negotiation prior to a connection being fully established\n+(ie, prior to the `verack` being received by both sides). [BIP 155\n+(addrv2)][BIP155] and [BIP 339 (wtxid-relay)][BIP339] are examples of\n+this approach, which involves sending and receiving a single new message\n+(`sendaddrv2` and `wtxidrelay` respectively), in between `version` and\n+`verack` to indicate support of the new feature.\n+\n+In all these cases, sending new messages on the network raises the\n+question of what non-implementing software will do with such messages. The\n+common behavior observed on the network was for software to ignore\n+unknown messages received from a peer, so these proposals posed small\n+risk to potential network partitioning. In fact, supporting protocol\n+extensibility in this manner was given as an explicit reason to ignore\n+unknown messages in Bitcoin's [first release][0.1-extensibility].\n+\n+However, if nodes respond to unknown messages by disconnecting, then\n+the network might partition in the future as incompatible software is\n+deployed. And in fact, some clients on the network have historically\n+discouraged or disallowed unknown messages, both between `version`\n+and `verack` (eg, Bitcoin Core discouraged such messages between\n+[PR#9720][PR#9720] and [PR#19723][PR#19723], and btcd disallowed\n+such messages until [PR#1812][btcd#1812], but see also discussion in\n+[#1661][btcd#1661]), as well as after `verack`.\n+\n+To maximise compatibility with such clients, most of these BIPs require\n+that peers bump the protocol version:\n+\n+ * [BIP 130][BIP130] requires version 70012 or higher,\n+ * [BIP 133][BIP133] requires version 70013 or higher,\n+ * [BIP 152][BIP152] recommends version 70014/70015 or higher, and\n+ * [BIP 339][BIP339] requires version 70016 or higher.\n+\n+And while [BIP 155][BIP155] does not specify a minimum protocol version,\n+implementations have [added][PR#20564] a de facto requirement of version\n+70016 or higher.\n+\n+In this BIP, we propose codifying and generalising the mechanism used by\n+[BIP 339][BIP339] for future P2P upgrades, by adding a single new feature\n+negotiation message that can be reused for advertising arbitrary new\n+features, and requiring that implementing software ignore unknown features\n+that might be advertised. This allows future upgrades to negotiate new\n+features by exchanging messages prior to exchanging `verack` messages,\n+without concerns of being unnecessarily disconnected by a peer which\n+doesn't understand the messages, and without needing to coordinate\n+updating the protocol version.\n+\n+## Specification\n+\n+The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHOULD\", \"SHOULD NOT\",\n+\"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be\n+interpreted as described in RFC 2119.\n+\n+Nodes implementing this BIP:\n+\n+ * MUST advertise a protocol version number `>= 70017`,\n+ * MUST NOT send `feature` messages to peers that advertise a protocol\n+   version number `< 70017`,\n+ * MUST accept `feature` messages received after the `version` message\n+   and before the `verack` message, and\n+ * MUST NOT send `feature` messages after sending the `verack` message.\n+\n+In addition, nodes implementing this BIP:\n+\n+ * SHOULD ignore unknown messages received after the `version` message\n+   and before the `verack` message,\n+ * MAY ignore `feature` messages sent after `verack`, and\n+ * MAY disconnect peers who send `feature` messages after `verack`.\n+\n+Feature specifications based on this BIP:\n+\n+ * MUST forbid sending messages it introduces after `verack` to a peer\n+   that has not indicated support for the feature via a `feature`\n+   message.\n+\n+### `feature` message\n+\n+The payload of the `feature` message contains exactly the following data:\n+\n+| Type        | Name          | Description |\n+| ----------- | ------------- | ----------- |\n+| string      | `featureid`   | Unique identifier for the feature |\n+| byte-vector | `featuredata` | Feature-specific configuration data |\n+\n+The `featureid` is encoded in the usual way, that is as a `CompactSize`\n+specifying the string length, followed by that many bytes. The string\n+length MUST be between 4 and 80, inclusive. The string SHOULD include\n+only printable ASCII characters (ie, each byte should have a value between 32 and\n+126, inclusive).\n+\n+Likewise, `featuredata` is encoded as a `CompactSize` specifying the\n+byte-vector size, followed by that many bytes. How these bytes are\n+interpreted is part of the feature's specification. The byte-vector size\n+MUST NOT be more than 512 bytes. Note that the `featuredata` field is not\n+optional, so if no data is required, an empty vector should be provided,\n+ie serialized as a `CompactSize` of 0.\n+\n+Nodes implementing this BIP MAY disconnect peers that send `feature`\n+messages where the `feature` message's payload cannot be correctly\n+parsed (including having missing or additional data), even if they do\n+not recognise the `featureid`.\n+\n+Nodes implementing this BIP MUST ignore `feature` messages specifying a\n+`featureid` they do not support, so long as the payload conforms to the\n+requirements above.\n+\n+The `featureid` MUST be a globally unique identifier for the feature.\n+For features published as a BIP, the `featureid` SHOULD be the assigned\n+BIP number, eg \"BIP339\", or be based on the BIP number (eg, including\n+a \"v2\" suffix for versioning, or a \"p3\" suffix for different parts of\n+the BIP). For experimental features that do not (yet) have a BIP number\n+assigned, some other unique identifier MUST be chosen, such as a URL to\n+the repository where development is taking place, or the sha256 digest\n+of some longer reference.\n+\n+Nodes implementing both this BIP and [BIP 324 (v2 P2P encrypted\n+transport)][BIP324] MUST treat a message with a 1-byte `message_type`\n+equal to `129` that is received prior to `verack` as the `feature` message.\n+\n+### Feature negotiation\n+\n+It is RECOMMENDED that feature negotiation be designed and implemented\n+as follows:\n+\n+ * all `feature` messages and the `verack` message should be sent\n+   immediately on receipt of the peer's `version` message\n+ * any negotiation calculations should be performed immediately on\n+   receipt of the peer's `verack` message\n+\n+This structure is fairly easy to implement, and avoids introducing any\n+significant latency that might result from more interactive negotiation\n+methods.\n+\n+Feature specifications defining a `featureid` MAY make use of the\n+following approaches:\n+\n+#### Feature advertisement:\n+\n+ 1. Send a `feature` message advertising the `featureid` unconditionally\n+ 2. Accept messages related to the feature unconditionally\n+ 3. Only send messages defined by the feature if the peer sent\n+    a valid `feature` message for the `featureid`.\n+\n+This approach is appropriate for many simple features that define\n+new messages, particularly where an implementation might only\n+implement sending or receiving a message, but not both, eg [BIP 35\n+(mempool)][BIP35].\n+\n+#### Feature coordination:\n+\n+ 1. Send a `feature` message advertising the `featureid` unconditionally\n+ 2. Check if the peer sends the same `feature` message (or a compatible\n+    one), and enable the feature for this peer if so.\n+ 3. Only send/accept messages or encode data items according to the\n+    feature's specification if the feature is enabled for this peer.\n+\n+This approach is appropriate for upgrades to data encoding in\n+P2P messages, eg [BIP 339 (wtxidrelay)][BIP339] or [BIP 155\n+(addrv2)][BIP155].\n+\n+#### Feature versioning:\n+\n+ 1. Send `feature` messages for multiple incompatible features, eg\n+    `BIP339v3`, `BIP339v2`, `BIP339v1`. Send in order from most preferred\n+    to least.\n+ 2. Track the corresponding `feature` messages from your peer.\n+ 3. If you were the listening peer, enable your highest preference feature\n+    that your peer also supports.\n+ 4. If you were the initiating peer, enable the first feature that your\n+    peer announced, that you also support.\n+ 5. For example if the listening peer sends `BIP339v3`, `BIP339v2`,\n+    `BIP339v1`, and the initiating peer sends `BIP339v1`, `BIP339v2`,\n+    then the listening peer should select `BIP339v2` when `verack`\n+    is received, and the initiating peer should select `BIP339v2`\n+    as soon as `feature BIP339v2` is received.\n+ 6. Conversely, if the initiating peer sends `BIP339v3`, `BIP339v2`,\n+    `BIP339v1`, and the listening peer sends `BIP339v1`, `BIP339v2`,\n+    then the listening peer should select `BIP339v1` when `verack`\n+    is received, and the initiating peer should select `BIP339v1`\n+    as soon as `feature BIP339v1` is received.\n+ 7. In most cases, implementations should simply advertise incompatible\n+    features in order from most recent to oldest, on the basis that\n+    the only reason to make incompatible updates is because there are\n+    significant improvements. Exceptions to that may occur when two\n+    incompatible features are both receiving active development, or\n+    when an implementation has only partially implemented the latest\n+    spec, and the older spec is better supported (and thus should be\n+    listed first, as the preferred protocol to adopt).\n+\n+This approach may be appropriate when making substantial changes to a\n+deployed protocol and backwards compatibility is desirable on a short-term\n+basis, or when there is disagreement amongst implementations or users\n+as to which approach is most desirable.\n+\n+## Considerations",
      "path": "bip-peer-feature-negotiation.md",
      "position": 232,
      "original_position": 232,
      "commit_id": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "original_commit_id": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Nit: Iâ€™m interpreting this as the stand-in for the Rationale section.",
      "created_at": "2026-01-08T21:17:29Z",
      "updated_at": "2026-01-08T21:18:58Z",
      "html_url": "https://github.com/bitcoin/bips/pull/2076#discussion_r2673936287",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/2673936287"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/2076"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 232,
      "original_line": 232,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/2679130331",
      "pull_request_review_id": 3647337739,
      "id": 2679130331,
      "node_id": "PRRC_kwDOAN28mc6fsEjb",
      "diff_hunk": "@@ -0,0 +1,314 @@\n+```\n+  BIP: ?\n+  Layer: Peer Services\n+  Title: Peer Feature Negotiation\n+  Author: Anthony Towns <aj@erisian.com.au>\n+  Comments-Summary: No comments yet.\n+  Comments-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-XXXX\n+  Status: Draft\n+  Type: Standards Track\n+  Created: 2025-12-06\n+  License: BSD-3-Clause\n+  Post-History: https://gnusha.org/pi/bitcoindev/aUUXLgEUCgGb122o@erisian.com.au/T/#u\n+                https://gnusha.org/pi/bitcoindev/20200821023647.7eat4goqqrtaqnna@erisian.com.au/\n+```\n+\n+## Abstract\n+\n+This BIP defines a peer-to-peer message that can be used for announcements\n+and negotiation related to support of new peer-to-peer features.",
      "path": "bip-peer-feature-negotiation.md",
      "position": 19,
      "original_position": 19,
      "commit_id": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "original_commit_id": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "in_reply_to_id": 2673890166,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "That seems redundant -- new p2p features have to be optional or they'll break backwards compatibility (and if they break backwards compatibility and are mandatory, maybe there's no need to negotiate), and existing optional features would at least need some sort of new spec in order to use this approach?",
      "created_at": "2026-01-11T01:03:55Z",
      "updated_at": "2026-01-11T01:03:55Z",
      "html_url": "https://github.com/bitcoin/bips/pull/2076#discussion_r2679130331",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/2679130331"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/2076"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 19,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bips/pulls/comments/2679135628",
      "pull_request_review_id": 3647342216,
      "id": 2679135628,
      "node_id": "PRRC_kwDOAN28mc6fsF2M",
      "diff_hunk": "@@ -0,0 +1,314 @@\n+```\n+  BIP: ?\n+  Layer: Peer Services\n+  Title: Peer Feature Negotiation\n+  Author: Anthony Towns <aj@erisian.com.au>\n+  Comments-Summary: No comments yet.\n+  Comments-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-XXXX\n+  Status: Draft\n+  Type: Standards Track\n+  Created: 2025-12-06\n+  License: BSD-3-Clause\n+  Post-History: https://gnusha.org/pi/bitcoindev/aUUXLgEUCgGb122o@erisian.com.au/T/#u\n+                https://gnusha.org/pi/bitcoindev/20200821023647.7eat4goqqrtaqnna@erisian.com.au/\n+```\n+\n+## Abstract\n+\n+This BIP defines a peer-to-peer message that can be used for announcements\n+and negotiation related to support of new peer-to-peer features.\n+\n+## Motivation\n+\n+Historically, new peer-to-peer protocol changes have been tied to\n+bumping the protocol version, so that peers know to only attempt feature\n+negotiation with other peers that may have been upgraded to support the\n+feature. Coordinating the protocol version across implementations, when\n+different clients may have different priorities for features to implement,\n+is an unnecessary burden in the upgrade process for P2P features that do\n+not require universal support. And at a more philosophical level, having\n+the P2P protocol be [permissionlessly extensible][permless-extensible],\n+with no coordination required between implementations or developers\n+seems ideal for a decentralized system.\n+\n+Many earlier P2P protocol upgrades were implemented as new messages\n+sent after a peer connection is setup (ie, after receipt of a `verack`\n+message by both sides). See [BIP 130 (sendheaders)][BIP130], [BIP 133\n+(feefilter)][BIP133], [BIP 152 (compact blocks)][BIP152] for some\n+examples. However, for some P2P upgrades, it is helpful to perform\n+feature negotiation prior to a connection being fully established\n+(ie, prior to the `verack` being received by both sides). [BIP 155\n+(addrv2)][BIP155] and [BIP 339 (wtxid-relay)][BIP339] are examples of\n+this approach, which involves sending and receiving a single new message\n+(`sendaddrv2` and `wtxidrelay` respectively), in between `version` and\n+`verack` to indicate support of the new feature.\n+\n+In all these cases, sending new messages on the network raises the\n+question of what non-implementing software will do with such messages. The\n+common behavior observed on the network was for software to ignore\n+unknown messages received from a peer, so these proposals posed small\n+risk to potential network partitioning. In fact, supporting protocol\n+extensibility in this manner was given as an explicit reason to ignore\n+unknown messages in Bitcoin's [first release][0.1-extensibility].\n+\n+However, if nodes respond to unknown messages by disconnecting, then\n+the network might partition in the future as incompatible software is\n+deployed. And in fact, some clients on the network have historically\n+discouraged or disallowed unknown messages, both between `version`\n+and `verack` (eg, Bitcoin Core discouraged such messages between\n+[PR#9720][PR#9720] and [PR#19723][PR#19723], and btcd disallowed\n+such messages until [PR#1812][btcd#1812], but see also discussion in\n+[#1661][btcd#1661]), as well as after `verack`.\n+\n+To maximise compatibility with such clients, most of these BIPs require\n+that peers bump the protocol version:\n+\n+ * [BIP 130][BIP130] requires version 70012 or higher,\n+ * [BIP 133][BIP133] requires version 70013 or higher,\n+ * [BIP 152][BIP152] recommends version 70014/70015 or higher, and\n+ * [BIP 339][BIP339] requires version 70016 or higher.\n+\n+And while [BIP 155][BIP155] does not specify a minimum protocol version,\n+implementations have [added][PR#20564] a de facto requirement of version\n+70016 or higher.\n+\n+In this BIP, we propose codifying and generalising the mechanism used by\n+[BIP 339][BIP339] for future P2P upgrades, by adding a single new feature\n+negotiation message that can be reused for advertising arbitrary new\n+features, and requiring that implementing software ignore unknown features\n+that might be advertised. This allows future upgrades to negotiate new\n+features by exchanging messages prior to exchanging `verack` messages,\n+without concerns of being unnecessarily disconnected by a peer which\n+doesn't understand the messages, and without needing to coordinate\n+updating the protocol version.\n+\n+## Specification\n+\n+The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHOULD\", \"SHOULD NOT\",\n+\"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be\n+interpreted as described in RFC 2119.\n+\n+Nodes implementing this BIP:\n+\n+ * MUST advertise a protocol version number `>= 70017`,\n+ * MUST NOT send `feature` messages to peers that advertise a protocol\n+   version number `< 70017`,\n+ * MUST accept `feature` messages received after the `version` message\n+   and before the `verack` message, and\n+ * MUST NOT send `feature` messages after sending the `verack` message.\n+\n+In addition, nodes implementing this BIP:\n+\n+ * SHOULD ignore unknown messages received after the `version` message\n+   and before the `verack` message,\n+ * MAY ignore `feature` messages sent after `verack`, and\n+ * MAY disconnect peers who send `feature` messages after `verack`.\n+\n+Feature specifications based on this BIP:\n+\n+ * MUST forbid sending messages it introduces after `verack` to a peer\n+   that has not indicated support for the feature via a `feature`\n+   message.\n+\n+### `feature` message\n+\n+The payload of the `feature` message contains exactly the following data:\n+\n+| Type        | Name          | Description |\n+| ----------- | ------------- | ----------- |\n+| string      | `featureid`   | Unique identifier for the feature |\n+| byte-vector | `featuredata` | Feature-specific configuration data |\n+\n+The `featureid` is encoded in the usual way, that is as a `CompactSize`\n+specifying the string length, followed by that many bytes. The string\n+length MUST be between 4 and 80, inclusive. The string SHOULD include\n+only printable ASCII characters (ie, each byte should have a value between 32 and\n+126, inclusive).\n+\n+Likewise, `featuredata` is encoded as a `CompactSize` specifying the\n+byte-vector size, followed by that many bytes. How these bytes are\n+interpreted is part of the feature's specification. The byte-vector size\n+MUST NOT be more than 512 bytes. Note that the `featuredata` field is not\n+optional, so if no data is required, an empty vector should be provided,\n+ie serialized as a `CompactSize` of 0.\n+\n+Nodes implementing this BIP MAY disconnect peers that send `feature`\n+messages where the `feature` message's payload cannot be correctly\n+parsed (including having missing or additional data), even if they do\n+not recognise the `featureid`.\n+\n+Nodes implementing this BIP MUST ignore `feature` messages specifying a\n+`featureid` they do not support, so long as the payload conforms to the\n+requirements above.\n+\n+The `featureid` MUST be a globally unique identifier for the feature.\n+For features published as a BIP, the `featureid` SHOULD be the assigned\n+BIP number, eg \"BIP339\", or be based on the BIP number (eg, including\n+a \"v2\" suffix for versioning, or a \"p3\" suffix for different parts of\n+the BIP). For experimental features that do not (yet) have a BIP number\n+assigned, some other unique identifier MUST be chosen, such as a URL to\n+the repository where development is taking place, or the sha256 digest\n+of some longer reference.\n+\n+Nodes implementing both this BIP and [BIP 324 (v2 P2P encrypted\n+transport)][BIP324] MUST treat a message with a 1-byte `message_type`\n+equal to `129` that is received prior to `verack` as the `feature` message.\n+\n+### Feature negotiation\n+\n+It is RECOMMENDED that feature negotiation be designed and implemented\n+as follows:\n+\n+ * all `feature` messages and the `verack` message should be sent\n+   immediately on receipt of the peer's `version` message\n+ * any negotiation calculations should be performed immediately on\n+   receipt of the peer's `verack` message\n+\n+This structure is fairly easy to implement, and avoids introducing any\n+significant latency that might result from more interactive negotiation\n+methods.\n+\n+Feature specifications defining a `featureid` MAY make use of the\n+following approaches:\n+\n+#### Feature advertisement:\n+\n+ 1. Send a `feature` message advertising the `featureid` unconditionally\n+ 2. Accept messages related to the feature unconditionally\n+ 3. Only send messages defined by the feature if the peer sent\n+    a valid `feature` message for the `featureid`.\n+\n+This approach is appropriate for many simple features that define\n+new messages, particularly where an implementation might only\n+implement sending or receiving a message, but not both, eg [BIP 35\n+(mempool)][BIP35].\n+\n+#### Feature coordination:\n+\n+ 1. Send a `feature` message advertising the `featureid` unconditionally\n+ 2. Check if the peer sends the same `feature` message (or a compatible\n+    one), and enable the feature for this peer if so.\n+ 3. Only send/accept messages or encode data items according to the\n+    feature's specification if the feature is enabled for this peer.\n+\n+This approach is appropriate for upgrades to data encoding in\n+P2P messages, eg [BIP 339 (wtxidrelay)][BIP339] or [BIP 155\n+(addrv2)][BIP155].\n+\n+#### Feature versioning:\n+\n+ 1. Send `feature` messages for multiple incompatible features, eg\n+    `BIP339v3`, `BIP339v2`, `BIP339v1`. Send in order from most preferred\n+    to least.\n+ 2. Track the corresponding `feature` messages from your peer.\n+ 3. If you were the listening peer, enable your highest preference feature\n+    that your peer also supports.\n+ 4. If you were the initiating peer, enable the first feature that your\n+    peer announced, that you also support.\n+ 5. For example if the listening peer sends `BIP339v3`, `BIP339v2`,\n+    `BIP339v1`, and the initiating peer sends `BIP339v1`, `BIP339v2`,\n+    then the listening peer should select `BIP339v2` when `verack`\n+    is received, and the initiating peer should select `BIP339v2`\n+    as soon as `feature BIP339v2` is received.\n+ 6. Conversely, if the initiating peer sends `BIP339v3`, `BIP339v2`,\n+    `BIP339v1`, and the listening peer sends `BIP339v1`, `BIP339v2`,\n+    then the listening peer should select `BIP339v1` when `verack`\n+    is received, and the initiating peer should select `BIP339v1`\n+    as soon as `feature BIP339v1` is received.\n+ 7. In most cases, implementations should simply advertise incompatible\n+    features in order from most recent to oldest, on the basis that\n+    the only reason to make incompatible updates is because there are\n+    significant improvements. Exceptions to that may occur when two\n+    incompatible features are both receiving active development, or\n+    when an implementation has only partially implemented the latest\n+    spec, and the older spec is better supported (and thus should be\n+    listed first, as the preferred protocol to adopt).\n+\n+This approach may be appropriate when making substantial changes to a\n+deployed protocol and backwards compatibility is desirable on a short-term\n+basis, or when there is disagreement amongst implementations or users\n+as to which approach is most desirable.\n+\n+## Considerations",
      "path": "bip-peer-feature-negotiation.md",
      "position": 232,
      "original_position": 232,
      "commit_id": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "original_commit_id": "9697b2be251b1a80f3ed10d5aae5eda070fb3a0b",
      "in_reply_to_id": 2673936287,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Some of the rationale is in the motivation section (\"what inspired the design\"), some is in the spec itself (particularly the \"feature negotiation\" parts); the \"considerations\" section focuses on \"why these design decisions vs other similarly plausible ones\". [49](https://github.com/bitcoin/bips/blob/master/bip-0049.mediawiki#user-content-Considerations) (and 84), [90](https://github.com/bitcoin/bips/blob/master/bip-0090.mediawiki#user-content-Considerations), and [348](https://github.com/bitcoin/bips/blob/master/bip-0348.md#design-considerations) also use a Considerations section fwiw. I'm mostly following the structure of [Suhas's old draft](https://github.com/sdaftuar/bips/blob/2020-08-generalized-feature-negotiation/bip-p2p-feature-negotiation.mediawiki). I didn't rename it to Rationale because it didn't seem sensible to move all the rationale into that section, or to do the footnotes thing like [340](https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki#user-content-Footnotes), and BIP3 specifies Rationale as optional, and that it's fine as long as you \"consider and address as appropriate\".",
      "created_at": "2026-01-11T01:17:00Z",
      "updated_at": "2026-01-11T01:17:00Z",
      "html_url": "https://github.com/bitcoin/bips/pull/2076#discussion_r2679135628",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/comments/2679135628"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bips/pulls/2076"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 232,
      "original_line": 232,
      "side": "RIGHT"
    }
  ]
}